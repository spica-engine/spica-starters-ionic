{"version":3,"sources":["./src/app/music-streaming/pages/list/list-routing.module.ts","./src/app/music-streaming/pages/list/list.module.ts","./src/app/music-streaming/pages/list/list.page.ts","./src/app/music-streaming/pages/list/list.page.scss","./src/app/music-streaming/pages/list/list.page.html"],"names":[],"mappings":"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","file":"src_app_music-streaming_pages_list_list_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ListPage } from './list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    children: [\n      {\n        path: ':id',\n        component: ListPage,\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ListPageRoutingModule } from './list-routing.module';\n\nimport { ListPage } from './list.page';\nimport { MusicStreamingComponentModule } from '../../components/music-components.module';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ListPageRoutingModule,\n    MusicStreamingComponentModule\n  ],\n  declarations: [ListPage]\n})\nexport class ListPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertController, ModalController } from '@ionic/angular';\nimport { FollowableModalComponent } from '../../components/followable-modal/followable-modal.component';\nimport { AudioService } from '../../services/audio.service';\nimport { AuthService } from '../../services/auth.service';\nimport * as DataService from '../../services/bucket';\nimport { environment } from '../../services/environment';\n\n@Component({\n  selector: 'app-list',\n  templateUrl: './list.page.html',\n  styleUrls: ['./list.page.scss'],\n})\nexport class ListPage implements OnInit {\n  artist: DataService.Artist;\n  tracks: any[] = [];\n  playList: DataService.Playlist;\n  kind: DataService.Track_Kind;\n  paramId: string;\n  defaultImage = environment.user_img;\n\n  constructor(\n    private _authService: AuthService,\n    private _route: ActivatedRoute,\n    private _audioService: AudioService,\n    private _modalController: ModalController,\n    private _alertController: AlertController,\n    private _router: Router\n  ) {\n    this._authService.initBucket();\n  }\n\n  async ngOnInit() {\n    this.paramId = this._route.snapshot.params.id;\n    this.manageData();\n  }\n\n  manageData() {\n    this._route.queryParams.subscribe(async (param) => {\n      if (param.type == 'musicKind') {\n        this.kind = await this.getKind();\n        this.tracks = await this.getTracksByKind();\n      } else if (param.type == 'artist') {\n        this.artist = await this.getArtist();\n        this.tracks = this.artist.uploaded_tracks as DataService.Track[];\n      } else if (param.type == 'playList') {\n        this.playList = await this.getPlayList();\n        this.tracks = this.playList.tracks as DataService.Track[];\n      }\n    });\n  }\n\n  getArtist() {\n    return DataService.artist.get(this.paramId, {\n      queryParams: { relation: ['uploaded_tracks.artist'] },\n    });\n  }\n\n  getKind() {\n    return DataService.track_kind.get(this.paramId);\n  }\n\n  getTracksByKind() {\n    return DataService.track.getAll({\n      queryParams: { filter: { kinds: { $in: [this.paramId] } } },\n    });\n  }\n\n  getPlayList() {\n    return DataService.playlist.get(this.paramId, {\n      queryParams: { relation: true },\n    });\n  }\n\n  setTrack(track) {\n    this._audioService.setTrack(track);\n  }\n\n  itemClicked(event, track) {\n    if (event == 'action' && this.playList) {\n      this.tracks = this.tracks.filter((el) => {\n        return el._id != track._id;\n      });\n\n      DataService.playlist.patch({\n        _id: this.playList._id,\n        tracks: this.tracks,\n      });\n    } else {\n      this.setTrack(track);\n    }\n  }\n\n  async followableModal() {\n    const modal = await this._modalController.create({\n      component: FollowableModalComponent,\n      componentProps: {\n        type: 'track',\n        playListId: this.paramId,\n      },\n    });\n\n    modal.onWillDismiss().then((res) => {\n      if (!res.data) {\n        return;\n      }\n      this.manageData();\n    });\n\n    return await modal.present();\n  }\n\n  async presentAlert() {\n    const alert = await this._alertController.create({\n      message: 'Are you sure you want to remove play list?',\n      buttons: [\n        'Cancel',\n        {\n          text: 'Confirm',\n          handler: () => {\n            this.removePlayList();\n          },\n        },\n      ],\n    });\n    await alert.present();\n  }\n\n  async removePlayList() {\n    await DataService.playlist.remove(this.playList._id);\n    this._router.navigate([`/music-streaming/tabs/library`]);\n  }\n}\n","export default \":host ion-header ion-toolbar ion-icon {\\n  font-size: 1.2rem;\\n  color: #aa0000;\\n}\\n:host .metadata {\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  margin-top: 10px;\\n}\\n:host .metadata ::ng-deep .part-item {\\n  width: 80% !important;\\n  height: 80% !important;\\n  box-shadow: 0px 0px 12px 2px #505050 !important;\\n}\\n:host .metadata .info {\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  margin-top: 5px;\\n  padding: 15px;\\n}\\n:host .metadata .info ion-text {\\n  margin-bottom: 5px;\\n}\\n:host .metadata .info ion-text span {\\n  font-weight: 700;\\n}\\n:host .metadata.kind {\\n  position: relative;\\n}\\n:host .metadata.kind img {\\n  width: 100%;\\n  height: 260px;\\n  object-fit: cover;\\n}\\n:host .metadata.kind ion-text {\\n  position: absolute;\\n  font-size: 20px;\\n  font-weight: 700;\\n  bottom: 15px;\\n}\\n:host .list {\\n  padding: 0 15px;\\n  margin-bottom: 70px;\\n}\\n:host .list::ng-deep .action-icon {\\n  color: #aa0000;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpc3QucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdNO0VBQ0UsaUJBQUE7RUFDQSxjQUFBO0FBRlI7QUFNRTtFQUNFLFdBQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0FBSko7QUFPTTtFQUNFLHFCQUFBO0VBQ0Esc0JBQUE7RUFDQSwrQ0FBQTtBQUxSO0FBU0k7RUFDRSxXQUFBO0VBQ0EsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsZUFBQTtFQUNBLGFBQUE7QUFQTjtBQVNNO0VBQ0Usa0JBQUE7QUFQUjtBQVFRO0VBQ0UsZ0JBQUE7QUFOVjtBQVdJO0VBQ0Usa0JBQUE7QUFUTjtBQVVNO0VBQ0UsV0FBQTtFQUNBLGFBQUE7RUFDQSxpQkFBQTtBQVJSO0FBVU07RUFDRSxrQkFBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtFQUNBLFlBQUE7QUFSUjtBQWFFO0VBQ0UsZUFBQTtFQUNBLG1CQUFBO0FBWEo7QUFhTTtFQUNFLGNBQUE7QUFYUiIsImZpbGUiOiJsaXN0LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgaW9uLWhlYWRlcntcbiAgICBpb24tdG9vbGJhcntcbiAgICAgIGlvbi1pY29ue1xuICAgICAgICBmb250LXNpemU6IDEuMnJlbTtcbiAgICAgICAgY29sb3I6IHJnYigxNzAsIDAsIDApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAubWV0YWRhdGEge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIG1hcmdpbi10b3A6IDEwcHg7XG5cbiAgICA6Om5nLWRlZXAge1xuICAgICAgLnBhcnQtaXRlbSB7XG4gICAgICAgIHdpZHRoOiA4MCUgIWltcG9ydGFudDtcbiAgICAgICAgaGVpZ2h0OiA4MCUgIWltcG9ydGFudDtcbiAgICAgICAgYm94LXNoYWRvdzogMHB4IDBweCAxMnB4IDJweCByZ2IoODAsIDgwLCA4MCkgIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAuaW5mbyB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgbWFyZ2luLXRvcDogNXB4O1xuICAgICAgcGFkZGluZzogMTVweDtcblxuICAgICAgaW9uLXRleHQge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICAgIHNwYW4ge1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAmLmtpbmQge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgaW1nIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMjYwcHg7XG4gICAgICAgIG9iamVjdC1maXQ6IGNvdmVyO1xuICAgICAgfVxuICAgICAgaW9uLXRleHQge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgICAgICAgYm90dG9tOiAxNXB4O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5saXN0IHtcbiAgICBwYWRkaW5nOiAwIDE1cHg7XG4gICAgbWFyZ2luLWJvdHRvbTogNzBweDtcbiAgICAmOjpuZy1kZWVwIHtcbiAgICAgIC5hY3Rpb24taWNvbiB7XG4gICAgICAgIGNvbG9yOiByZ2IoMTcwLCAwLCAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ== */\";","export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar>\\n    <ion-back-button slot=\\\"start\\\"></ion-back-button>\\n    <ion-icon *ngIf=\\\"playList\\\" name=\\\"trash\\\" slot=\\\"end\\\" (click)=\\\"presentAlert()\\\"></ion-icon>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ng-container *ngIf=\\\"tracks\\\">\\n  <div class=\\\"metadata artist\\\" *ngIf=\\\"artist\\\">\\n    <music-part-item\\n      [data]=\\\"{img: artist['profile_picture'], text: artist['name']}\\\"\\n    ></music-part-item>\\n    <div class=\\\"info\\\">\\n      <ion-text>Prepared for <span>user</span></ion-text>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"metadata kind\\\" *ngIf=\\\"kind || playList\\\">\\n    <ng-container *ngIf=\\\"kind\\\">\\n      <img [src]=\\\"kind.image\\\" />\\n      <ion-text>{{kind.title}}</ion-text>\\n    </ng-container>\\n    <ng-container *ngIf=\\\"playList\\\">\\n      <img [src]=\\\"playList.image || defaultImage\\\" />\\n      <ion-text>{{playList.name}}</ion-text>\\n    </ng-container>\\n  </div>\\n\\n  <div class=\\\"list\\\">\\n    <music-list-item\\n      *ngIf=\\\"playList\\\"\\n      [data]=\\\"{\\n      avatarIcon: 'add',\\n      title: 'Add new track',\\n      isCircle: true\\n    }\\\"\\n      (click)=\\\"followableModal()\\\"\\n    ></music-list-item>\\n    <music-list-item\\n      [data]=\\\"{\\n      image: track.cover,\\n      title: track.name,\\n      actionIcon: playList ? 'remove-circle-outline' : undefined,\\n      subTitle: track.artist['name']\\n    }\\\"\\n      *ngFor=\\\"let track of tracks\\\"\\n      (clickAction)=\\\"itemClicked($event, track)\\\"\\n    ></music-list-item>\\n  </div>\\n</ng-container>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}