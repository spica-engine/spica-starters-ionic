{"version":3,"sources":["./src/app/social-media/pages/friend/friend-routing.module.ts","./src/app/social-media/pages/friend/friend.module.ts","./src/app/social-media/pages/friend/friend.page.ts","./src/app/social-media/pages/friend/friend.page.scss","./src/app/social-media/pages/friend/friend.page.html"],"names":[],"mappings":"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","file":"src_app_social-media_pages_friend_friend_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FriendPage } from './friend.page';\n\nconst routes: Routes = [\n  {\n\n    path: '',\n    children: [\n      {\n        path: ':userId',\n        children: [\n          {\n            path: \"\",\n            component: FriendPage,\n          },\n          {\n            path: ':type',\n            children: [\n              {\n                path: \"\",\n                component: FriendPage\n              },\n              {\n                path: \"profile\",\n                loadChildren: () => import('../social-profile/social-profile.module').then(m => m.SocialProfilePageModule),\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FriendPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport { FriendPageRoutingModule } from './friend-routing.module';\nimport { FriendPage } from './friend.page';\nimport { TranslateLoader, TranslateModule } from '@ngx-translate/core';\nimport { ComponentsModule } from '../../components/components.module';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\nimport { HttpClient } from '@angular/common/http';\n\nexport function createTranslateLoader(http: HttpClient) {\n  return new TranslateHttpLoader(http, '../assets/i18n/', '.json');\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    FriendPageRoutingModule,\n    ComponentsModule,\n    TranslateModule.forChild({\n      loader: {\n        provide: TranslateLoader,\n        useFactory: createTranslateLoader,\n        deps: [HttpClient],\n      },\n      extend: true,\n    }),\n  ],\n  declarations: [\n    FriendPage,\n  ]\n})\nexport class FriendPageModule {}\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { Follow, User ,follow} from \"../../services/bucket\";\nimport { UserService } from \"../../services/user.service\";\n\n@Component({\n  selector: 'app-friend',\n  templateUrl: './friend.page.html',\n  styleUrls: ['./friend.page.scss'],\n})\nexport class FriendPage{\n  query_user_id;\n  type = 0;\n  user: User;\n  userFollows: Follow[];\n  user_follows_arr = [];\n  loading: boolean = true;\n  me: User;\n  myFollows = [];\n  allUsers = [];\n  showedUsers = [];\n  progress_user: string;\n  searchedText: string;\n  sendedRequests = [];\n\n  constructor(\n    private _route: ActivatedRoute,\n    private _userService: UserService,\n  ) {}\n\n  async ionViewWillEnter() {\n    this.userFollows = undefined;\n    this.me = await this._userService.getActiveUser().toPromise();\n    this.query_user_id = await this._route.snapshot.paramMap.get(\"userId\");\n    this.type = (await this._route.snapshot.params.type) || 0;\n    if (this.me._id == this.query_user_id) {\n      this.user = this.me;\n    } else\n      this.user = await this._userService\n        .getUserById(this.query_user_id)\n    // if (this.user._id != this.me._id) this.myFollows = await this.getMyFollows().toPromise()\n    this.setUserFollowParams();\n    this.sendedRequests = await this._userService\n      .getAllSendedRequests()\n  }\n  getFollows() {\n    return follow\n      .getAll({\n        queryParams: {\n          filter: {\n            $or: [{ follower: this.user._id }, { following: this.user._id }],\n          },\n          relation: true,\n          sort: { _id: -1 },\n        },\n      })\n  }\n\n  async setUserFollowParams() {\n    this.user_follows_arr = [];\n    this.progress_user = \"\";\n    this.userFollows = this.userFollows || (await this.getFollows());\n    if (this.user._id == this.me._id)\n      this.myFollows = JSON.parse(JSON.stringify(this.userFollows));\n    else this.myFollows = await this.getMyFollows()\n    this.userFollows.forEach((item) => {\n      if (item.follower['_id'] == this.user._id)\n        this.user_follows_arr.push({\n          user: item.following,\n          type: 1,\n          _id: item._id,\n        });\n      if (item.following['_id'] == this.user._id)\n        this.user_follows_arr.push({\n          user: item.follower,\n          type: 0,\n          _id: item._id,\n        });\n    });\n\n    this.myFollows = this.myFollows.map((my_follow) => {\n      my_follow.follower = my_follow.follower._id || my_follow.follower;\n      my_follow.following = my_follow.following._id || my_follow.following;\n      return my_follow;\n    });\n    this.user_follows_arr.forEach((item) => {\n      let follow_item = this.myFollows.filter(\n        (my_items) =>\n          my_items.follower == item.user._id ||\n          my_items.following == item.user._id\n      );\n      switch (follow_item.length) {\n        case 2:\n          if (this.me._id == this.user._id)\n            item.user[\"follow_state\"] = this.type == 0 ? \"mutual\" : \"unfollow\";\n          else item.user[\"follow_state\"] = \"none\";\n          break;\n        case 1:\n          if (follow_item[0].follower == item.user._id)\n            item.user[\"follow_state\"] = \"follow\";\n          if (\n            follow_item[0].following == item.user._id &&\n            this.me._id == this.user._id\n          ) {\n            //unfollow only in my profile\n            item.user[\"follow_state\"] = \"unfollow\";\n          }\n          if (!item.user[\"follow_state\"]) {\n            item.user[\"follow_state\"] = \"none\";\n          }\n          break;\n        case 0:\n          item.user[\"follow_state\"] = \"follow\";\n          break;\n        default:\n          item.user[\"follow_state\"] = \"none\";\n          break;\n      }\n      if (\n        item.user[\"follow_state\"] == \"follow\" &&\n        this.sendedRequests.length > 0\n      ) {\n        item.user[\"follow_state\"] = this.sendedRequests.filter(\n          (sended) => sended.reciever == item.user[\"_id\"]\n        )[0]\n          ? \"send_request\"\n          : \"follow\";\n      }\n    });\n    this.loading = false;\n    this.allUsers = this.user_follows_arr.filter(\n      (item) => this.type == item.type\n    );\n    if (!this.searchedText) this.showedUsers = [...this.allUsers];\n    else this.getUserBySearch();\n  }\n\n  changeType(type) {\n    this.loading = true;\n    this.type = type;\n    setTimeout(() => {\n      this.setUserFollowParams();\n    }, 500);\n  }\n\n  getMyFollows() {\n    return follow.getAll({\n      queryParams: {\n        filter: {\n          $or: [{ follower: this.me._id }, { following: this.me._id }],\n        },\n      },\n    });\n  }\n\n  followOperation(item) {\n    this.progress_user = item._id;\n    if (item.user.follow_state == \"follow\") this.followUser(item);\n    if (item.user.follow_state == \"unfollow\") this.unFollowUser(item);\n    if (item.user.follow_state == \"mutual\") this.removeFollow(item);\n    if (item.user.follow_state == \"send_request\") this.cancelRequest(item);\n  }\n  cancelRequest(item) {\n    this._userService\n      .deleteRequest(\n        this.sendedRequests.filter(\n          (sended) => sended.reciever == item.user[\"_id\"]\n        )[0]._id\n      )\n      .then(() => {\n        this.sendedRequests = this.sendedRequests.filter(\n          (sended) => sended.reciever != item.user[\"_id\"]\n        );\n        this.userFollows = undefined;\n        this.setUserFollowParams();\n      });\n  }\n  removeFollow(entry) {\n    follow\n      .remove(entry._id)\n      .then(() => {\n        this.userFollows = undefined;\n        this._userService.followerUsers = this._userService.followerUsers.filter(\n          (item) => item._id != entry.user._id\n        );\n        this.setUserFollowParams();\n      });\n  }\n\n  followUser(entry) {\n    entry.user[\"visibility\"] == \"private\"\n      ? this._userService\n          .sendRequest(entry.user._id)\n          .then((requestData) => {\n            this.userFollows = undefined;\n            this.sendedRequests.push(requestData);\n            this.setUserFollowParams();\n          })\n      : this._userService\n          .followUser(entry.user)\n          .then(() => {\n            this.userFollows = undefined;\n            this.setUserFollowParams();\n          });\n  }\n\n  unFollowUser(entry) {\n    this._userService\n      .unFollowUser(entry)\n      .then(() => {\n        this.userFollows = undefined;\n        this.setUserFollowParams();\n      });\n  }\n  getUserBySearch() {\n    this.showedUsers = this.allUsers.filter((item) =>\n      item.user.username\n        .toLowerCase()\n        .includes(this.searchedText.toLocaleLowerCase())\n    );\n  }\n}\n\n","export default \":host ion-header .actions {\\n  --padding-bottom: 0px;\\n  --min-height: 0px;\\n}\\n:host ion-spinner {\\n  width: 20px;\\n  color: unset;\\n}\\n:host .d-flex {\\n  display: flex;\\n}\\n:host ion-list {\\n  margin: 0 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyaWVuZC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUk7RUFDRSxxQkFBQTtFQUNBLGlCQUFBO0FBRE47QUFJRTtFQUNFLFdBQUE7RUFDQSxZQUFBO0FBRko7QUFJRTtFQUNFLGFBQUE7QUFGSjtBQUtFO0VBQ0UsY0FBQTtBQUhKIiwiZmlsZSI6ImZyaWVuZC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gIGlvbi1oZWFkZXIge1xuICAgIC5hY3Rpb25zIHtcbiAgICAgIC0tcGFkZGluZy1ib3R0b206IDBweDtcbiAgICAgIC0tbWluLWhlaWdodDogMHB4O1xuICAgIH1cbiAgfVxuICBpb24tc3Bpbm5lciB7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgY29sb3I6IHVuc2V0O1xuICB9XG4gIC5kLWZsZXgge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gIH1cblxuICBpb24tbGlzdCB7XG4gICAgbWFyZ2luOiAwIDEwcHg7XG4gIH1cbn1cbiJdfQ== */\";","export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{user?.username}} </ion-title>\\n  </ion-toolbar>\\n  <ion-toolbar class=\\\"actions\\\">\\n    <app-segmenttab\\n      [segments]=\\\"['followers','following']\\\"\\n      [type]=\\\"type\\\"\\n      (typeChange)=\\\"changeType($event)\\\"\\n    ></app-segmenttab>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-item lines=\\\"none\\\" class=\\\"ion-no-padding\\\">\\n    <ion-searchbar\\n      mode=\\\"ios\\\" \\n      animated\\n      debounce=\\\"500\\\"\\n      [placeholder]=\\\"'search'|translate\\\"\\n      [(ngModel)]=\\\"searchedText\\\"\\n      (ngModelChange)=\\\"getUserBySearch()\\\"\\n    ></ion-searchbar>\\n  </ion-item>\\n  <ion-spinner\\n    class=\\\"spinner-center-page\\\"\\n    name=\\\"crescent\\\"\\n    *ngIf=\\\"loading\\\"\\n  ></ion-spinner>\\n  <ion-list lines=\\\"full\\\" *ngIf=\\\"!loading\\\">\\n    <ion-item class=\\\"ion-no-padding\\\" detail=\\\"false\\\" *ngFor=\\\"let item of showedUsers\\\">\\n      <user-minified-card\\n        [user]=\\\"item.user\\\"\\n        [type]=\\\"'horizontal'\\\"\\n      ></user-minified-card>\\n      <div class=\\\"d-flex\\\" *ngIf=\\\"me._id!=item.user._id\\\">\\n        <ion-button\\n          color=\\\"primary\\\"\\n          *ngIf=\\\"item.user['follow_state']=='mutual' || (user?._id==me._id && type==0)\\\"\\n          (click)=\\\"item.user['follow_state']=='mutual' ? followOperation(item):removeFollow(item)\\\"\\n          [disabled]=\\\"progress_user==item['_id']\\\"\\n        >\\n          <span> {{\\\"mutual\\\" | translate}}</span>\\n          <ion-spinner\\n            class=\\\"spinner-center-page\\\"\\n            *ngIf=\\\"progress_user==item['_id'] && item.user['follow_state']=='mutual'\\\"\\n          ></ion-spinner>\\n        </ion-button>\\n        <ion-button\\n          color=\\\"primary\\\"\\n          [attr.fill]=\\\"item.user['follow_state'] == 'unfollow' ? 'solid' : 'outline'\\\"\\n          *ngIf=\\\"item.user['follow_state'] == 'unfollow' || item.user['follow_state'] == 'follow' || item.user['follow_state'] == 'send_request'\\\"\\n          (click)=\\\"followOperation(item)\\\"\\n          [disabled]=\\\"progress_user==item['_id']\\\"\\n        >\\n          <span> {{item.user['follow_state'] | translate}}</span>\\n          <ion-spinner\\n            class=\\\"spinner-center-page\\\"\\n            *ngIf=\\\"progress_user==item['_id']\\\"\\n          ></ion-spinner>\\n        </ion-button>\\n      </div>\\n    </ion-item>\\n  </ion-list>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}