{"version":3,"sources":["./src/app/forum/pages/home/home-routing.module.ts","./src/app/forum/pages/home/home.module.ts","./src/app/forum/pages/home/home.page.ts","./src/app/forum/pages/home/home.page.scss","./src/app/forum/pages/home/home.page.html"],"names":[],"mappings":"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","file":"src_app_forum_pages_home_home_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage\n  },\n  {\n    path: 'forum-details',\n    loadChildren: () => import('../forum-details/forum-details.module').then(m=> m.ForumDetailsPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HomePageRoutingModule } from './home-routing.module';\nimport { HomePage } from './home.page';\nimport { SpicaComponentsModule } from 'src/app/components/components.module';\nimport { ForumComponentModule } from '../../components/forum-components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule,\n    SpicaComponentsModule,\n    ForumComponentModule,\n  ],\n  declarations: [HomePage],\n})\nexport class HomePageModule {}\n","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../../services/auth.service';\nimport * as DataService from '../../services/bucket';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n  userId: string;\n  categories: DataService.Category[] = [];\n  comments: DataService.Comment[] = [];\n  titles: DataService.Title[] = [];\n  user: DataService.User;\n\n  constructor(private _authService: AuthService, private _router: Router) {\n    this._authService.initBucket();\n  }\n\n  async ngOnInit() {\n    this.userId = (await this._authService.getUser().toPromise())?._id;\n    if (this.userId) {\n      await this.getUser();\n    }\n\n    await this.getCategory();\n    this.getComments();\n    this.getTitles();\n  }\n\n  async getUser() {\n    this.user = await DataService.user.get(this.userId, {\n      queryParams: { relation: true },\n    });\n  }\n\n  getCategory() {\n    return DataService.category.getAll().then((res) => {\n      this.categories = res;\n    });\n  }\n\n  async getComments(catId = undefined) {\n    if(catId == 'all'){\n      catId = undefined;\n    }\n    this.comments = [];\n    await DataService.comment\n      .getAll({\n        queryParams: {\n          limit: 10,\n          relation: true,\n          sort: { _id: -1 },\n          filter: { is_post: true, category: catId },\n        },\n      })\n      .then((res) => {\n        this.comments = res;\n      });\n  }\n\n  getTitles() {\n    DataService.title.getAll().then((res) => {\n      this.titles = res;\n    });\n  }\n\n  newPostModa() {\n    if (this.userId) {\n      this._router.navigate(['/forum/create-forum']);\n    } else {\n      this._router.navigateByUrl('/forum/authorization', { replaceUrl: true });\n    }\n  }\n\n  clickMenuItem() {\n    if (!this.userId) {\n      this._router.navigateByUrl('/forum/authorization', { replaceUrl: true });\n    }\n  }\n}\n","export default \":host ion-content .category {\\n  display: flex;\\n  overflow-x: auto;\\n  padding: 20px 10px 10px;\\n  position: sticky;\\n  top: 0;\\n  z-index: 12;\\n  background: white;\\n}\\n:host ion-content .category ion-button {\\n  --border-radius: 8px;\\n  font-family: \\\"Segoe UI\\\", Tahoma, Geneva, Verdana, sans-serif;\\n}\\n:host ion-content .comments {\\n  padding-bottom: 65px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVJO0VBQ0UsYUFBQTtFQUNBLGdCQUFBO0VBQ0EsdUJBQUE7RUFDQSxnQkFBQTtFQUNBLE1BQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7QUFETjtBQUVNO0VBQ0Usb0JBQUE7RUFDQSw0REFBQTtBQUFSO0FBR0k7RUFDRSxvQkFBQTtBQUROIiwiZmlsZSI6ImhvbWUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xyXG4gIGlvbi1jb250ZW50IHtcclxuICAgIC5jYXRlZ29yeSB7XHJcbiAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgIG92ZXJmbG93LXg6IGF1dG87XHJcbiAgICAgIHBhZGRpbmc6IDIwcHggMTBweCAxMHB4O1xyXG4gICAgICBwb3NpdGlvbjogc3RpY2t5O1xyXG4gICAgICB0b3A6IDA7XHJcbiAgICAgIHotaW5kZXg6IDEyO1xyXG4gICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcclxuICAgICAgaW9uLWJ1dHRvbiB7XHJcbiAgICAgICAgLS1ib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgICAgICAgZm9udC1mYW1pbHk6IFwiU2Vnb2UgVUlcIiwgVGFob21hLCBHZW5ldmEsIFZlcmRhbmEsIHNhbnMtc2VyaWY7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC5jb21tZW50cyB7XHJcbiAgICAgIHBhZGRpbmctYm90dG9tOiA2NXB4O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0= */\";","export default \"<spica-menu-bar project=\\\"forum\\\" [routeble]=\\\"userId ? true : false\\\" (clickMenuItem)=\\\"clickMenuItem()\\\"></spica-menu-bar>\\n<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-menu-button color=\\\"dark\\\" menu=\\\"main-menu\\\" slot=\\\"start\\\"></ion-menu-button>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <spica-scroll-category [categories]=\\\"categories\\\" *ngIf=\\\"categories.length\\\" (action)=\\\"getComments($event)\\\"></spica-scroll-category>\\n\\n  <div class=\\\"comments\\\">\\n    <ion-spinner\\n    *ngIf=\\\"!comments.length\\\"\\n    class=\\\"spinner-center-page\\\"\\n  ></ion-spinner>\\n    <post-card [comment]=\\\"comment\\\" *ngFor=\\\"let comment of comments\\\" [user]=\\\"user\\\"></post-card>\\n  </div>\\n</ion-content>\\n<ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\" (click)=\\\"newPostModa()\\\">\\n  <ion-fab-button>\\n    <ion-icon name=\\\"add\\\"></ion-icon>\\n  </ion-fab-button>\\n</ion-fab>\\n\";"],"sourceRoot":"webpack:///"}