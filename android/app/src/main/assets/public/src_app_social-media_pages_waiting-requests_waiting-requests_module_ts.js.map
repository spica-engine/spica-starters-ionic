{"version":3,"sources":["./src/app/social-media/pages/waiting-requests/waiting-requests-routing.module.ts","./src/app/social-media/pages/waiting-requests/waiting-requests.module.ts","./src/app/social-media/pages/waiting-requests/waiting-requests.page.ts","./src/app/social-media/pages/waiting-requests/waiting-requests.page.scss","./src/app/social-media/pages/waiting-requests/waiting-requests.page.html"],"names":[],"mappings":"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","file":"src_app_social-media_pages_waiting-requests_waiting-requests_module_ts.js","sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { Routes, RouterModule } from \"@angular/router\";\n\nimport { WaitingRequestsPage } from \"./waiting-requests.page\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    children: [\n      {\n        path: \"\",\n        component: WaitingRequestsPage,\n      },\n      {\n        path: \"profile\",\n        loadChildren: () =>\n          import(\"../social-profile/social-profile.module\").then((m) => m.SocialProfilePageModule),\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class WaitingRequestsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { WaitingRequestsPageRoutingModule } from './waiting-requests-routing.module';\n\nimport { WaitingRequestsPage } from './waiting-requests.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ComponentsModule } from '../../components/components.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    WaitingRequestsPageRoutingModule,\n    ComponentsModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [WaitingRequestsPage]\n})\nexport class WaitingRequestsPageModule {}\n","import { Component, OnInit } from \"@angular/core\";\nimport { User } from \"../../services/bucket\";\nimport { UserService } from \"../../services/user.service\";\n\n@Component({\n  selector: \"app-waiting-requests\",\n  templateUrl: \"./waiting-requests.page.html\",\n  styleUrls: [\"./waiting-requests.page.scss\"],\n})\nexport class WaitingRequestsPage implements OnInit {\n  constructor(private _userService: UserService) {}\n  user_requests = [];\n  showed_requests = [];\n  loading: boolean = true;\n  searchedText: string;\n\n  ngOnInit() {\n    this.loading = true;\n    this.getUserRequests();\n  }\n  doRefresh() {\n    this.loading = true;\n    this.getUserRequests();\n  }\n  getUserRequests() {\n    this._userService\n      .getAllWaitingRequests()\n      .then((requestsData) => {\n        this.user_requests = requestsData;\n        this.showed_requests = [...this.user_requests];\n        this.loading = false;\n      });\n  }\n  async acceptRequest(item) {\n    this.loading = true;\n    await this._userService.receiveRequest(item.sender, item._id);\n    this.removeFromRequests(item._id);\n    this.loading = false;\n  }\n  async deleteRequest(item) {\n    this.loading = true;\n    await this._userService.deleteRequest(item._id);\n    this.removeFromRequests(item._id);\n    this.loading = false;\n  }\n  removeFromRequests(id) {\n    this.user_requests = this.user_requests.filter((item) => item._id != id);\n    this.showed_requests = this.showed_requests.filter((item) => item._id != id);\n  }\n  getUserBySearch() {\n    this.showed_requests = this.user_requests.filter((item) =>\n      item.sender.username\n        .toLowerCase()\n        .includes(this.searchedText.toLocaleLowerCase())\n    );\n  }\n}\n","export default \":host ion-list ion-item {\\n  padding: 3px 10px;\\n}\\n:host ion-list .actions {\\n  display: flex;\\n  align-items: center;\\n}\\n:host ion-list .actions ion-icon {\\n  font-size: 22px;\\n}\\n:host ion-list .actions ion-icon.passive {\\n  color: var(--ion-color-light-shade);\\n}\\n:host ion-list .actions span {\\n  margin: 0 10px;\\n  color: var(--ion-color-light-shade);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndhaXRpbmctcmVxdWVzdHMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVJO0VBQ0UsaUJBQUE7QUFETjtBQUdJO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0FBRE47QUFFTTtFQUNFLGVBQUE7QUFBUjtBQUNRO0VBQ0UsbUNBQUE7QUFDVjtBQUVNO0VBQ0UsY0FBQTtFQUNBLG1DQUFBO0FBQVIiLCJmaWxlIjoid2FpdGluZy1yZXF1ZXN0cy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gIGlvbi1saXN0IHtcbiAgICBpb24taXRlbXtcbiAgICAgIHBhZGRpbmc6IDNweCAxMHB4O1xuICAgIH1cbiAgICAuYWN0aW9ucyB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGlvbi1pY29uIHtcbiAgICAgICAgZm9udC1zaXplOiAyMnB4O1xuICAgICAgICAmLnBhc3NpdmUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbGlnaHQtc2hhZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzcGFuIHtcbiAgICAgICAgbWFyZ2luOiAwIDEwcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbGlnaHQtc2hhZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19 */\";","export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{\\\"follow_requests\\\" | translate | titlecase }}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content fullscreen>\\n  <ion-refresher\\n    slot=\\\"fixed\\\"\\n    pullFactor=\\\"0.5\\\"\\n    pullMin=\\\"100\\\"\\n    pullMax=\\\"200\\\"\\n    (ionRefresh)=\\\"doRefresh()\\\"\\n  >\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n  <ion-item lines=\\\"none\\\" class=\\\"ion-no-padding\\\">\\n    <ion-searchbar\\n      mode=\\\"ios\\\"\\n      animated\\n      debounce=\\\"500\\\"\\n      [placeholder]=\\\"'search'|translate\\\"\\n      [(ngModel)]=\\\"searchedText\\\"\\n      (ngModelChange)=\\\"getUserBySearch()\\\"\\n    ></ion-searchbar>\\n  </ion-item>\\n  <ion-list lines=\\\"full\\\">\\n    <ion-item class=\\\"ion-no-padding\\\" *ngFor=\\\"let item of showed_requests\\\">\\n      <user-minified-card\\n        [user]=\\\"item['sender']\\\"\\n        [type]=\\\"'horizontal'\\\"\\n        [with_router]=\\\"true\\\"\\n      ></user-minified-card>\\n      <div class=\\\"actions\\\">\\n        <div>\\n          <ion-icon\\n            (click)=\\\"acceptRequest(item)\\\"\\n            name=\\\"checkmark-outline\\\"\\n          ></ion-icon>\\n        </div>\\n        <span>|</span>\\n        <div>\\n          <ion-icon\\n            (click)=\\\"deleteRequest(item)\\\"\\n            name=\\\"close-outline\\\"\\n          ></ion-icon>\\n        </div>\\n      </div>\\n    </ion-item>\\n  </ion-list>\\n  <ion-spinner\\n    *ngIf=\\\"loading\\\"\\n    class=\\\"spinner-center-page\\\"\\n    name=\\\"crescent\\\"\\n  ></ion-spinner>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}