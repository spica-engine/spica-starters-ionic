{"version":3,"sources":["./src/app/social-media/services/activity.service.ts","./src/app/social-media/tabs/tabs-routing.module.ts","./src/app/social-media/tabs/tabs.module.ts","./src/app/social-media/tabs/tabs.page.ts","./src/app/social-media/tabs/tabs.page.scss","./src/app/social-media/tabs/tabs.page.html"],"names":[],"mappings":"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","file":"src_app_social-media_tabs_tabs_module_ts.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { Activity, activity, User, user } from '../services/bucket';\nimport { DataService } from './data.service';\nimport { UserService } from './user.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ActivityService {\n  user: User;\n  activities: Activity[] = [];\n  last_unseen_index: number = 0;\n  $activities: BehaviorSubject<Activity[]> = new BehaviorSubject([]);\n  $unseenActivityCount: BehaviorSubject<number> = new BehaviorSubject(0);\n\n  constructor(\n    private _dataService: DataService,\n    private _userService: UserService\n  ) {}\n\n  async initialize() {\n    this.user = await this._userService.getActiveUser().toPromise();\n    let queryParams = {};\n    queryParams['filter'] = { owner: this.user._id };\n    queryParams['limit'] = 20;\n    queryParams['sort'] = { _id: -1 };\n    queryParams['relation'] = ['user', 'post'];\n\n    activity\n      .getAll({\n        queryParams,\n      })\n      .then((activities) => {\n        this.activities = activities;\n        let unseen_activities_count = 0;\n\n        this.activities.forEach((activity) => {\n          if (\n            new Date(activity.created_at) > new Date(this.user.last_online_date)\n          ) {\n            unseen_activities_count += 1;\n          }\n        });\n\n        this.last_unseen_index =\n          this.activities.length - unseen_activities_count;\n        this.$unseenActivityCount.next(unseen_activities_count);\n        this.$activities.next(this.activities);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  updateSeen() {\n    this.$activities.next(this.activities);\n    this.$unseenActivityCount.next(0);\n  }\n\n  getUnseenActivity() {\n    return this.$unseenActivityCount;\n  }\n\n  getActivities() {\n    return this.$activities;\n  }\n\n  async getNewActivities() {\n    this.user = await this._userService.getActiveUser().toPromise();\n    let queryParams = {};\n    let newActivities;\n\n    queryParams['filter'] = {\n      owner: this.user._id,\n      _id: {\n        $gt: this.activities.length > 0 ? this.activities[0]._id : undefined,\n      },\n    };\n    queryParams['limit'] = 20;\n    queryParams['sort'] = { _id: -1 };\n    queryParams['relation'] = ['user', 'post'];\n\n    this.last_unseen_index = this.activities.length;\n\n    newActivities = await activity\n      .getAll({\n        queryParams,\n      })\n      .catch((err) => console.log(err));\n\n    let newActivitiesArr = newActivities as Array<Activity>;\n    if (newActivitiesArr.length > 0) {\n      this.activities = newActivitiesArr.concat(this.activities);\n    }\n\n    this.activities = [\n      ...new Map(this.activities.map((item) => [item['_id'], item])).values(),\n    ];\n\n    this.$activities.next(this.activities);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TabsPage } from './tabs.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TabsPage,\n    children: [\n      {\n        path: '',\n        redirectTo: 'home',\n        pathMatch: 'full',\n      },\n      {\n        path: 'home',\n        loadChildren: () =>\n          import('../pages/home/home.module').then((m) => m.HomePageModule),\n      },\n      {\n        path: 'discover',\n        loadChildren: () =>\n          import('../pages/discover/discover.module').then(\n            (m) => m.DiscoverPageModule\n          ),\n      },\n      {\n        path: 'profile',\n        loadChildren: () =>\n          import('../pages/social-profile/social-profile.module').then(\n            (m) => m.SocialProfilePageModule\n          ),\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TabsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TabsPageRoutingModule } from './tabs-routing.module';\n\nimport { TabsPage } from './tabs.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { SpicaComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TabsPageRoutingModule,\n    TranslateModule,\n    SpicaComponentsModule\n  ],\n  declarations: [TabsPage]\n})\nexport class TabsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { User, initialize } from '../services/bucket';\nimport { UserService } from '../services/user.service';\nimport { ChatService } from '../services/chat.service';\nimport { ActivityService } from '../services/activity.service';\nimport { DataService } from '../services/data.service';\nimport { TabsService } from './tabs.service';\nimport { Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AuthService } from '../services/auth.service';\nimport { CommonService } from 'src/app/services/common.service';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-tabs',\n  templateUrl: './tabs.page.html',\n  styleUrls: ['./tabs.page.scss'],\n})\nexport class TabsPage implements OnInit {\n  me: User;\n  isOldUser: boolean = false;\n  selectedTab: string = 'home';\n  backDropImage: string;\n  unreadMessages: number = 0;\n  loading: boolean = true;\n  userSubscribe: Subscription;\n  constructor(\n    private _userService: UserService,\n    private _chatService: ChatService,\n    private _activityService: ActivityService,\n    private _tabsService: TabsService,\n    private _translateService: TranslateService,\n    private _dataService: DataService,\n    private _router: Router,\n    private _authService: AuthService,\n    private _commonService: CommonService\n  ) {\n    initialize({ identity: localStorage.getItem('socialmedia_spica_token') });\n  }\n\n  ngOnInit() {\n    this.getMe();\n  }\n  getMe() {\n    this.userSubscribe = this._userService.getActiveUser(true).subscribe(\n      async (data: User) => {\n        if (data && !this.me) {\n          this.me = data;\n          this.loading = false;\n          this._router.navigate(['/social-media/tabs/home'], {\n            replaceUrl: true,\n          });\n          this.isOldUser =\n            new Date(this.me.created_at).getTime() <\n            new Date().getTime() - 600 * 1000;\n          this._chatService.initialize();\n          this._activityService.initialize();\n          this._translateService.setDefaultLang('en');\n          this._translateService.currentLang = 'en';\n\n          await this._dataService\n            .setOnline('user', {}, this?.me?._id)\n            .toPromise();\n        } else this.loading = false;\n      },\n      (err) => console.log('err :', err)\n    );\n    this._tabsService\n      .watchBackdropImage()\n      .subscribe((data) => (this.backDropImage = data));\n    document.addEventListener('ionBackButton', (ev) => {\n      this.backDropImage = null;\n    });\n    this._router.events.subscribe((e) => {\n      if (e.hasOwnProperty('url')) {\n        this.selectedTab = e['url'].split('/');\n        this.selectedTab = this.selectedTab[3];\n      }\n      this._tabsService.selectedTab = this.selectedTab;\n    });\n  }\n  ngOnDestroy(): void {\n    //Called once, before the instance is destroyed.\n    //Add 'implements OnDestroy' to the class.\n    this.userSubscribe.unsubscribe();\n  }\n  async login(loginData) {\n    this.loading = true;\n    this._authService\n      .login(loginData.email, loginData.password)\n      .toPromise()\n      .then(\n        (_) => {\n          this._userService.$userRequest = undefined;\n          this.getMe();\n        },\n        (err) => {\n          this.loading = false;\n          this._commonService.presentToast(err.message, 1500);\n        }\n      );\n  }\n\n  async register(registerData) {\n    this._authService\n      .register({ ...registerData })\n      .toPromise()\n      .then((res) => {\n        this.login(registerData);\n        this._commonService.presentToast(res['message'], 1500);\n      })\n      .catch((err) => {\n        this._commonService.presentToast(err.error.message, 1500);\n      });\n  }\n  routeTab(route) {\n    this._router.navigateByUrl('/social-media/tabs/' + route, {\n      replaceUrl: true,\n    });\n  }\n}\n","export default \".tab-selected ion-icon {\\n  color: var(--ion-color-primary);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRhYnMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNFO0VBQ0UsK0JBQUE7QUFBSiIsImZpbGUiOiJ0YWJzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi50YWItc2VsZWN0ZWQge1xuICBpb24taWNvbiB7XG4gICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5KTtcbiAgfVxufVxuIl19 */\";","export default \"<ion-content>\\n  <ion-tabs *ngIf=\\\"me && !loading\\\">\\n    <ion-tab-bar slot=\\\"bottom\\\">\\n      <ion-tab-button\\n        [class.tab-selected]=\\\"selectedTab=='home'\\\"\\n        (click)=\\\"routeTab('home')\\\"\\n      >\\n        <ion-icon name=\\\"home\\\"></ion-icon>\\n        <ion-label>Home</ion-label>\\n      </ion-tab-button>\\n      <ion-tab-button\\n        (click)=\\\"routeTab('discover')\\\"\\n        [class.tab-selected]=\\\"selectedTab=='discover'\\\"\\n      >\\n        <ion-icon name=\\\"search-outline\\\"></ion-icon>\\n        <ion-label>Discover</ion-label>\\n      </ion-tab-button>\\n      <ion-tab-button\\n        (click)=\\\"selectedTab = 'profile' ; routeTab('profile/' + this.me?._id)\\\"\\n        [class.tab-selected]=\\\"selectedTab=='profile'\\\"\\n      >\\n        <ion-icon name=\\\"person\\\"></ion-icon>\\n        <ion-label>Profile</ion-label>\\n      </ion-tab-button>\\n    </ion-tab-bar>\\n  </ion-tabs>\\n  <spica-authorization\\n    *ngIf=\\\"!me && !loading\\\"\\n    (clickLogin)=\\\"login($event)\\\"\\n    (clickRegister)=\\\"register($event)\\\"\\n  ></spica-authorization>\\n  <ion-spinner\\n    *ngIf=\\\"loading\\\"\\n    class=\\\"spinner-center-page\\\"\\n    name=\\\"crescent\\\"\\n  ></ion-spinner>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}