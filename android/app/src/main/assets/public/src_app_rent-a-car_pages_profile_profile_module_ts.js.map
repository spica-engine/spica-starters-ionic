{"version":3,"sources":["./src/app/rent-a-car/pages/profile/profile-routing.module.ts","./src/app/rent-a-car/pages/profile/profile.module.ts","./src/app/rent-a-car/pages/profile/profile.page.ts","./src/app/rent-a-car/pages/profile/profile.page.scss","./src/app/rent-a-car/pages/profile/profile.page.html"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEV;AAE7C,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,sDAAW;KACvB;CACF,CAAC;IAMW,wBAAwB,SAAxB,wBAAwB;CAAG;AAA3B,wBAAwB;IAJpC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,wBAAwB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;AChBI;AACM;AACmB;AAErB;AAEuB;AAEvB;AACgC;IAahE,iBAAiB,SAAjB,iBAAiB;CAAG;AAApB,iBAAiB;IAX7B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,6EAAwB;YACxB,uFAAqB;YACrB,+DAAmB;SACpB;QACD,YAAY,EAAE,CAAC,sDAAW,CAAC;KAC5B,CAAC;GACW,iBAAiB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBoB;AACM;AACf;AAEuB;AACN;IAS7C,WAAW,SAAX,WAAW;IAStB,YAAoB,YAAyB,EACnC,YAAyB,EACzB,OAAe,EACf,cAA6B;QAHnB,iBAAY,GAAZ,YAAY,CAAa;QACnC,iBAAY,GAAZ,YAAY,CAAa;QACzB,YAAO,GAAP,OAAO,CAAQ;QACf,mBAAc,GAAd,cAAc,CAAe;QAVvC,cAAS,GAAY,IAAI,CAAC;QAC1B,cAAS,GAAW,EAAE,CAAC;IAUvB,CAAC;IAEK,QAAQ;;YACZ,IAAI,CAAC,EAAE,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,SAAS,EAAE,CAAC;YACxD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC;YACpB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG;gBACf,EAAE,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE;gBAC1C,EAAE,GAAG,EAAE,SAAS,EAAE,KAAK,EAAE,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE;aAC9C,CAAC;YACF,IAAI,CAAC,SAAS,CAAC,OAAO,CACpB,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CACxE,CAAC;YACF,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,EAAE,CAAC,GAAG,EAAE;gBAChC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;oBACrC;wBACE,GAAG,EAAE,YAAY;wBACjB,KAAK,EAAE,WAAW;wBAClB,QAAQ,EAAE,KAAK;wBACf,IAAI,EAAE,gBAAgB,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG;qBACvC;iBACF,CAAC,CAAC;aACJ;YACD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACzB,CAAC;KAAA;IAID,KAAK,CAAC,SAAS;QACb,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,YAAY;aACd,KAAK,CAAC,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC,QAAQ,CAAC;aAC1C,SAAS,EAAE;aACX,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACZ,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;YACb,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QACtD,CAAC,CAAC,CAAC;IACP,CAAC;IAED,QAAQ,CAAC,YAAY;QACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,YAAY;aACd,QAAQ,mBAAM,YAAY,EAAG;aAC7B,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACZ,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,IAAI,CAAC,CAAC;YACvD,IAAI,CAAC,KAAK,CAAC;gBACT,KAAK,EAAE,YAAY,CAAC,KAAK;gBACzB,QAAQ,EAAE,YAAY,CAAC,QAAQ;aAChC,CAAC,CAAC;QACL,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;YACb,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QAC5D,CAAC,CAAC,CAAC;IACP,CAAC;IACD,aAAa;QACX,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,kBAAkB,EAAE;YAC7C,UAAU,EAAE,IAAI;SACjB,CAAC,CAAC;IACL,CAAC;IACD,MAAM;QACJ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;IAC7B,CAAC;CACF;;YA9FQ,uDAAW;YAIX,+DAAW;YAHX,mDAAM;YAEN,0EAAa;;AAUT,WAAW;IALvB,wDAAS,CAAC;QACT,QAAQ,EAAE,aAAa;QACvB,4EAAkC;;KAEnC,CAAC;GACW,WAAW,CAiFvB;AAjFuB;;;;;;;;;;;;;;;;ACdxB,iEAAe,8CAA8C,mHAAmH,E;;;;;;;;;;;;;;;ACAhL,iEAAe,uyBAAuyB,E","file":"src_app_rent-a-car_pages_profile_profile_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ProfilePage } from './profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProfilePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProfilePageRoutingModule } from './profile-routing.module';\n\nimport { ProfilePage } from './profile.page';\nimport { SpicaComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ProfilePageRoutingModule,\n    SpicaComponentsModule,\n    ReactiveFormsModule,\n  ],\n  declarations: [ProfilePage]\n})\nexport class ProfilePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Item } from 'src/app/components/spica-item-list/spica-item-list.component';\nimport { CommonService } from 'src/app/services/common.service';\nimport { AuthService } from '../../services/auth.service';\nimport * as DataService from '../../services/bucket'\n\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.page.html',\n  styleUrls: ['./profile.page.scss'],\n})\nexport class ProfilePage implements OnInit {\n\n  isLoading: boolean = true;\n  listItems: Item[] = [];\n  user: DataService.User;\n  me: DataService.User;\n  loginForm: FormGroup;\n\n\n  constructor(private _formBuilder: FormBuilder,\n    private _authService: AuthService,\n    private _router: Router,\n    private _commonService: CommonService) {\n  }\n\n  async ngOnInit() {\n    this.me = await this._authService.getUser().toPromise();\n    this.user = this.me;\n    this.isLoading = false;\n    this.listItems = [\n      { key: 'name', value: '', seperate: true },\n      { key: 'surname', value: '', seperate: true },\n    ];\n    this.listItems.forEach(\n      (item) => (item.value = this.user[item.key] ? this.user[item.key] : '')\n    );\n    if (this.user._id == this.me._id) {\n      this.listItems = this.listItems.concat([\n        {\n          key: 'user-rents',\n          value: 'All Rents',\n          seperate: false,\n          link: '../user-rents/' + this.user._id,\n        },\n      ]);\n    }\n    this.isLoading = false;\n  }\n\n\n\n  login(loginData) {\n    this.isLoading = true;\n    this._authService\n      .login(loginData.email, loginData.password)\n      .toPromise()\n      .then((res) => {\n        this.isLoading = false;\n        this.nvigateToHome();\n      })\n      .catch((err) => {\n        this.isLoading = false;\n        this._commonService.presentToast(err.message, 1500);\n      });\n  }\n\n  register(registerData) {\n    this.isLoading = true;\n    this._authService\n      .register({ ...registerData })\n      .then((res) => {\n        this._commonService.presentToast(res['message'], 1500);\n        this.login({\n          email: registerData.email,\n          password: registerData.password,\n        });\n      })\n      .catch((err) => {\n        this.isLoading = false;\n        this._commonService.presentToast(err.error.message, 1500);\n      });\n  }\n  nvigateToHome() {\n    this._router.navigateByUrl('/rent-a-car/home', {\n      replaceUrl: true,\n    });\n  }\n  logout() {\n    this.isLoading = true;\n    this._authService.logout();\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9maWxlLnBhZ2Uuc2NzcyJ9 */\";","export default \"<ng-container *ngIf=\\\"!isLoading\\\">\\n  <spica-menu-bar project=\\\"rent-a-car\\\"></spica-menu-bar>\\n  <ion-header mode=\\\"ios\\\">\\n    <ion-toolbar mode=\\\"ios\\\">\\n      <ion-title *ngIf=\\\"me\\\">profile</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n  \\n  <ion-content>\\n    <spica-authorization *ngIf=\\\"!me && !isLoading\\\" (clickLogin)=\\\"login($event)\\\" (clickRegister)=\\\"register($event)\\\">\\n    </spica-authorization>\\n    <spica-user-profile-picture *ngIf=\\\"!isLoading && me\\\" [image]=\\\"me?.image\\\"></spica-user-profile-picture>\\n    <spica-item-list *ngIf=\\\"listItems.length>0 && !isLoading && me\\\" [items]=\\\"listItems\\\" (logout)=\\\"logout()\\\"></spica-item-list>\\n  </ion-content>\\n</ng-container>\\n<ion-spinner\\n  *ngIf=\\\"isLoading\\\"\\n  class=\\\"spinner-center-page\\\"\\n  name=\\\"crescent\\\"\\n></ion-spinner>\";"],"sourceRoot":"webpack:///"}