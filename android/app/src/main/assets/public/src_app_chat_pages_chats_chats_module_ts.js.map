{"version":3,"sources":["./src/app/chat/pages/chat-detail/chat-detail.page.ts","./src/app/chat/pages/chat-single/chat-single.page.ts","./src/app/chat/pages/chats/chats-routing.module.ts","./src/app/chat/pages/chats/chats.module.ts","./src/app/chat/pages/chats/chats.page.ts","./src/app/chat/pages/chat-detail/chat-detail.page.scss","./src/app/chat/pages/chat-single/chat-single.page.scss","./src/app/chat/pages/chats/chats.page.scss","./src/app/chat/pages/chat-detail/chat-detail.page.html","./src/app/chat/pages/chat-single/chat-single.page.html","./src/app/chat/pages/chats/chats.page.html"],"names":[],"mappings":"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","file":"src_app_chat_pages_chats_chats_module_ts.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n  ActionSheetController,\n  ModalController,\n} from '@ionic/angular';\nimport { SpicaUserSelectionComponent } from 'src/app/components/spica-user-selection/spica-user-selection.component';\nimport { CommonService } from 'src/app/services/common.service';\n// import { FollowingUsersComponent } from 'src/app/social-media/components/chat/following-users/following-users.component';\nimport { ImageService } from 'src/app/social-media/services/image.service';\n// import { FollowingUsersComponent } from \"src/app/components/chat/following-users/following-users.component\";\n// import { ConfirmationModalComponent } from \"src/app/components/generics/confirmation-modal/confirmation-modal.component\";\nimport { Chat, User, chat, user } from '../../services/bucket';\nimport { environment } from '../../services/environment';\nimport { UserService } from '../../services/user.service';\n\n@Component({\n  selector: 'app-chat-detail',\n  templateUrl: './chat-detail.page.html',\n  styleUrls: ['./chat-detail.page.scss'],\n})\nexport class ChatDetailPage implements OnInit {\n  me: User;\n  groupId: string;\n  chatGroup: Chat;\n  loading = {\n    name: false,\n    image: false,\n  };\n  users: User[] = [];\n  user_img_empty = environment.user_img;\n  constructor(\n    private _userService: UserService,\n    private _route: ActivatedRoute,\n    private _router: Router,\n    private _imageService: ImageService,\n    private _modalController: ModalController,\n    private _actionSheetCtrl: ActionSheetController,\n    private _commonService: CommonService\n  ) {}\n\n  async ngOnInit() {\n    this.me = await this._userService.getActiveUser();\n    if (!this.chatGroup) {\n      this.chatGroup = JSON.parse(\n        this._route.snapshot.paramMap.get('chat')\n      ) as Chat;\n      this.chatGroup.informations.forEach((item) => {\n        if (item.user['_id'] != this.me._id && item.status == 'active')\n          this.users.push(item.user as User);\n      });\n      this.users.unshift(this.me);\n    }\n  }\n\n  async deleteGroup() {\n    let managers = [];\n    if (this.chatGroup.managers.length > 1) {\n      managers = (this.chatGroup.managers as string[]).filter(\n        (user) => user != this.me._id\n      );\n    } else {\n      let activeUsers = this.chatGroup.informations.find(\n        (la) => la.status == 'active'\n      );\n      if (activeUsers) {\n        managers = [activeUsers.user['_id']];\n      }\n    }\n    await chat.patch({ managers: managers, _id: this.chatGroup._id });\n    await this.removeUser(this.me);\n    this._router.navigateByUrl('chat/tabs/chats');\n  }\n  updateGroup() {\n    this.loading.name = true;\n    let lastActive = [...this.chatGroup.informations];\n    lastActive = lastActive.map((item) => {\n      item.user = item.user['_id'] || item.user;\n      return item;\n    });\n\n    chat\n      .patch({\n        image: this.chatGroup.image,\n        name: this.chatGroup.name,\n        managers: this.chatGroup.managers as any,\n        informations: lastActive,\n        _id: this.chatGroup._id,\n      })\n      .then(() => {\n        this.loading.name = false;\n        this._router.navigate(['chat/tabs/chats']);\n      });\n  }\n  changeImage(data) {\n    this.loading.image = true;\n    let file_buf = this._imageService.toBuffer(data, 'jpeg');\n    let bufWithMeta = {\n      contentType: 'image/jpeg',\n      data: file_buf,\n      name: 'image',\n    };\n    let imageId;\n    let defaultImageId: any = environment.user_img.split('/');\n    defaultImageId = defaultImageId[defaultImageId.length - 1].split('?')[0];\n    if (this.chatGroup['image']) {\n      let splitArr = this.chatGroup['image'].split('/');\n      imageId = splitArr[splitArr.length - 1].split('?')[0];\n      if (defaultImageId == imageId) {\n        imageId = null;\n      }\n    }\n    this._imageService\n      .insert(bufWithMeta, imageId)\n      .then(async (res) => {\n        this.chatGroup['image'] =\n          res.url + `&timestamp=${new Date().getTime()}`;\n        this.loading.image = false;\n        this._commonService.presentToast(\n          'Picture changed. Click the save',\n          3000\n        );\n      })\n      .catch((e) => {\n        console.log('error : ', e);\n        this.loading.image = false;\n      });\n  }\n  addManager(user) {\n    setTimeout(async () => {\n      this.chatGroup.managers.push(user._id);\n      this.updateLastActive();\n      this._commonService.presentToast('Appointed as manager', 2000);\n    }, 1000);\n  }\n  deleteManager(user, informTheUser = true) {\n    let index = this.chatGroup.managers.findIndex((item) => item == user._id);\n    setTimeout(async () => {\n      if (index != -1) this.chatGroup.managers.splice(index, 1);\n      if (\n        this.chatGroup.managers.length == 0 &&\n        this.chatGroup.informations.length > 0\n      )\n        this.chatGroup.managers.push(\n          this.chatGroup.informations[0].user['_id']\n        );\n      this.updateLastActive();\n      if (informTheUser) {\n        this._commonService.presentToast('Removed from management', 2000);\n      }\n    }, 1000);\n  }\n  async addUsers() {\n    const modal = await this._modalController.create({\n      component: SpicaUserSelectionComponent,\n      componentProps: {\n        users: this.chatGroup.informations\n          .filter((item) => item.status != 'active')\n          .map((la) => la.user),\n      },\n    });\n\n    await modal.present();\n    const { data } = (await modal.onWillDismiss()) as {\n      data: { users: User[] };\n    };\n    if (data.users.length) {\n      data.users.forEach(async (item: User) => {\n        let oldUser = this.chatGroup.informations.filter(\n          (la) => la.user['_id'] == item._id\n        )[0];\n        if (oldUser) oldUser.status = 'active';\n        else\n          this.chatGroup.informations.push({\n            user: item as string,\n            status: 'active',\n          });\n        this.users.push(item);\n        this.updateLastActive();\n        data.users.length == 1\n          ? this._commonService.presentToast('User added', 2000)\n          : this._commonService.presentToast('Users added', 2000);\n      });\n    }\n  }\n\n  async showActions(user) {\n    if (\n      user._id == this.me._id ||\n      !this.chatGroup.managers.includes(this.me._id as any)\n    )\n      return;\n\n    let action_buttons = [\n      {\n        text: 'Remove From Group',\n        handler: () => {\n          this.removeUser(user);\n        },\n      },\n      {\n        text: 'Cancel',\n        role: 'cancel',\n        handler: () => {\n          console.log('Cancel clicked');\n        },\n      },\n    ];\n    if (this.chatGroup.managers.includes(user._id))\n      action_buttons.splice(action_buttons.length - 1, 0, {\n        text: 'Demote To User',\n        handler: () => {\n          this.deleteManager(user);\n        },\n      });\n    else\n      action_buttons.splice(action_buttons.length - 1, 0, {\n        text: 'Add Manager',\n        handler: () => {\n          this.addManager(user);\n        },\n      });\n\n    let actionSheet = await this._actionSheetCtrl.create({\n      buttons: action_buttons,\n    });\n\n    actionSheet.present();\n  }\n  async updateLastActive() {\n    let lastActive = JSON.parse(JSON.stringify(this.chatGroup.informations));\n    lastActive.forEach((element) => {\n      element.user = element.user._id as User;\n    });\n    await chat.patch({\n      informations: lastActive,\n      managers: this.chatGroup.managers,\n      _id: this.chatGroup._id,\n    });\n  }\n  async removeUser(user) {\n    this.chatGroup.informations.filter(\n      (la) => la.user['_id'] == user._id\n    )[0].status = 'deleted';\n    this.deleteManager(user, false);\n    this.users = this.users.filter((item) => item._id != user._id);\n    this.updateLastActive();\n    this._commonService.presentToast('User removed', 2000);\n  }\n}\n","import { Component, ViewChild } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { IonContent, IonInfiniteScroll } from '@ionic/angular';\nimport { map, share } from 'rxjs/operators';\nimport { ImageService } from 'src/app/social-media/services/image.service';\nimport {\n  User,\n  Chat,\n  Message,\n  message,\n  initialize,\n} from '../../services/bucket';\nimport { ChatService } from '../../services/chat.service';\nimport { DataService } from '../../services/data.service';\nimport { UserService } from '../../services/user.service';\n\n@Component({\n  selector: 'app-chat-single',\n  templateUrl: './chat-single.page.html',\n  styleUrls: ['./chat-single.page.scss'],\n})\nexport class ChatSinglePage {\n  @ViewChild(IonContent, { read: IonContent, static: false })\n  private content: IonContent;\n  @ViewChild(IonInfiniteScroll, { static: false })\n  infiniteScroll: IonInfiniteScroll;\n\n  message: string = '';\n  chatId: string;\n  messages: any[] = [];\n  $messages: any;\n  messagesSubscription: any;\n  chatGroupSubscription: any;\n  me: User;\n  opponent: User;\n  chatGroup: Chat = {};\n  usersInChatGroup: object = {};\n  loading: boolean = true;\n  loading_image: boolean = false;\n  image_message: string;\n  scroll_params = {\n    skip: 0,\n    limit: 20,\n  };\n  singleUserId;\n  constructor(\n    private _dataService: DataService,\n    private _userService: UserService,\n    private activatedRoute: ActivatedRoute,\n    private imageService: ImageService,\n    private _chatService: ChatService\n  ) {\n    initialize({ identity: localStorage.getItem('chat_spica_token') });\n  }\n  async ionViewWillEnter() {\n    this.chatId = this.activatedRoute.snapshot.paramMap.get('chat_id');\n    this.me = await this._userService.getActiveUser();\n    if (this.chatId != 'undefined') {\n      this.chatGroup = JSON.parse(\n        this.activatedRoute.snapshot.paramMap.get('chat')\n      );\n      if (!this.chatGroup.is_group) {\n        this.singleUserId = this.chatGroup.informations.filter(\n          (item) => item.user['_id'] != this.me._id\n        )[0].user['_id'];\n      }\n      this.getMessagesAndUpdateChat();\n      this.chatGroupSubscription = this._chatService.$chatGroups.subscribe(\n        (chatGroups: Chat[]) => {\n          let chatGroup = chatGroups.filter(\n            (ch) => ch._id == this.chatGroup._id\n          );\n          if (chatGroup.length) {\n            this.chatGroup = chatGroup[0];\n          } else {\n            this.usersInChatGroup[this.me._id].status = 'deleted';\n          }\n        }\n      );\n    } else {\n      this.loading = false;\n      this.opponent = JSON.parse(\n        this.activatedRoute.snapshot.paramMap.get('user')\n      );\n      this.chatGroup['name'] = `${this.opponent.username}`;\n    }\n    this.infiniteScroll.disabled = true;\n  }\n  ionViewWillLeave() {\n    if (this.messagesSubscription) this.messagesSubscription.unsubscribe();\n    if (this.chatGroupSubscription) this.chatGroupSubscription.unsubscribe();\n  }\n\n  getMessagesAndUpdateChat() {\n    this.chatGroup.informations.forEach((item) => {\n      this.usersInChatGroup[item.user['_id']] = item;\n    });\n    if (\n      (this.chatGroup.is_group &&\n        this.usersInChatGroup[this.me._id].status == 'active') ||\n      !this.chatGroup.is_group\n    ) {\n      this.$messages = message.realtime.getAll({\n        filter: { chat: this.chatId },\n        limit: this.scroll_params.limit,\n        skip: this.scroll_params.skip,\n        sort: { _id: -1 },\n      });\n\n      this.messagesSubscription = this.$messages\n        .pipe(\n          map((messages: []) =>\n            messages.sort((a, b) =>\n              a['_id'] > b['_id'] ? 1 : b['_id'] > a['_id'] ? -1 : 0\n            )\n          ),\n          share()\n        )\n        .subscribe(async (data) => {\n          this.scroll_params.skip = 0;\n          this._dataService\n            .setOnline(\n              'chat',\n              {\n                chat: this.chatGroup._id,\n              },\n              this.me._id\n            )\n            .toPromise();\n          this.loading = false;\n          if (data.length >= this.scroll_params.limit) {\n            this.infiniteScroll.disabled = false;\n          }\n          let messages = await this.setFirstLastMessage(data);\n          this.messages = [...messages];\n          setTimeout(() => {\n            this.content.scrollToBottom(300);\n          }, 200);\n        });\n      this.chatGroup['new_message_count'] = 0;\n    }\n  }\n\n  async setFirstLastMessage(data: Message[]) {\n    let currentMessage, previousMessage;\n    let messages = [];\n    for (let [index, message] of data.entries()) {\n      previousMessage = { ...(data[index - 1] || null) };\n      currentMessage = { ...message };\n      currentMessage['first_message'] = false;\n      currentMessage['recurring'] = false;\n      if (\n        index == 0 ||\n        new Date(currentMessage.created_at).getDate() !=\n          new Date(previousMessage.created_at).getDate()\n      )\n        currentMessage['first_message'] = true;\n      if (previousMessage._id && previousMessage.owner == currentMessage.owner)\n        currentMessage['recurring'] = true;\n      messages.push(currentMessage);\n    }\n    return messages;\n  }\n  sendImage(data) {\n    this.loading_image = true;\n    let file_buf = this.imageService.toBuffer(data, 'jpeg');\n    let bufWithMeta = {\n      contentType: 'image/jpeg',\n      data: file_buf,\n      name: 'image',\n    };\n    this.imageService.insert(bufWithMeta, undefined).then((res) => {\n      this.image_message = res.url;\n      this.loading_image = false;\n    });\n  }\n  cancelImage() {\n    (this.image_message = undefined), (this.loading_image = false);\n  }\n  async sendMessage() {\n    if ((/\\S/.test(this.message) && this.message != '') || this.image_message) {\n      if (this.chatId == 'undefined') {\n        await this.createChat();\n        this.getMessagesAndUpdateChat();\n      }\n      this.$messages.insert({\n        message: this.message,\n        owner: this.me._id as User,\n        chat: this.chatId as Message,\n        image: this.image_message,\n      });\n\n      this.chatGroup = this._chatService.chatGroups.some(\n        (item) => item._id == this.chatGroup._id\n      )\n        ? this._chatService.chatGroups.filter(\n            (item) => item._id == this.chatGroup._id\n          )[0]\n        : this.chatGroup;\n\n      this._dataService\n        .setOnline(\n          'chat',\n          {\n            chat: this.chatGroup._id,\n            last_message:\n              this.message || (this.image_message ? 'send photo to you' : ''),\n          },\n          this.me._id\n        )\n        .toPromise();\n      this.message = '';\n      this.image_message = undefined;\n    }\n  }\n\n  async createChat() {\n    let users = [this.me, this.opponent];\n    const data = await this._chatService\n      .createChat({\n        name: `${this.opponent.name} ${this.opponent.surname}`,\n        informations: users.map((user) => {\n          return { user: user._id };\n        }) as [],\n        managers: [this.me._id],\n      })\n      .catch((err) => console.log(err));\n\n    this.chatGroup = data as Chat;\n    this.chatGroup.informations = this.chatGroup.informations.map((item) => {\n      item.user = users.find((i) => i._id == item.user) as any;\n      return item;\n    });\n\n    this.chatId = data['_id'];\n  }\n  loadData() {\n    this.scroll_params.skip =\n      this.scroll_params.limit + this.scroll_params.skip;\n    this.getMessages().then(async (data) => {\n      this.messages = this.messages.concat(data);\n      this.messages = this.messages.sort((a, b) =>\n        a['_id'] > b['_id'] ? 1 : b['_id'] > a['_id'] ? -1 : 0\n      );\n      let messages = await this.setFirstLastMessage(this.messages);\n      this.messages = [...messages];\n      if (data.length < this.scroll_params.limit)\n        this.infiniteScroll.disabled = true;\n      this.infiniteScroll.complete();\n    });\n  }\n  getMessages() {\n    return message.getAll({\n      queryParams: {\n        filter: { chat: this.chatId },\n        limit: this.scroll_params.limit,\n        skip: this.scroll_params.skip,\n        sort: { _id: -1 },\n      },\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ChatDetailPage } from '../chat-detail/chat-detail.page';\nimport { ChatSinglePage } from '../chat-single/chat-single.page';\nimport { ChatsPage } from './chats.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    children: [\n      {\n        path: '',\n        component: ChatsPage,\n      },\n      {\n        path: ':chat_id',\n        children: [\n          {\n            path: '',\n            component: ChatSinglePage,\n          },\n          {\n            path: 'chat_detail',\n            children: [\n              { path: '', component: ChatDetailPage },\n              {\n                path: 'profile',\n                loadChildren: () =>\n                  import('../profile/profile.module').then(\n                    (m) => m.ProfilePageModule\n                  ),\n              },\n            ],\n          },\n          {\n            path: 'profile',\n            loadChildren: () =>\n              import('../profile/profile.module').then(\n                (m) => m.ProfilePageModule\n              ),\n          },\n        ],\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ChatsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport { ChatsPageRoutingModule } from './chats-routing.module';\nimport { ChatDetailPage } from '../chat-detail/chat-detail.page';\nimport { ChatSinglePage } from '../chat-single/chat-single.page';\nimport { ChatsPage } from './chats.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ComponentsModule } from 'src/app/social-media/components/components.module';\nimport { SpicaComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ChatsPageRoutingModule,\n    ComponentsModule,\n    SpicaComponentsModule,\n    TranslateModule.forChild()\n  ],\n  declarations:[\n    ChatSinglePage,\n    ChatsPage,\n     ChatDetailPage\n  ],\n})\nexport class ChatsPageModule {}\n","import { Component } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { Chat, user, User, chat } from '../../services/bucket';\nimport { Subscription } from 'rxjs';\nimport { environment } from '../../services/environment';\nimport { UserService } from '../../services/user.service';\nimport { ChatService } from '../../services/chat.service';\nimport { SpicaUserSelectionComponent } from 'src/app/components/spica-user-selection/spica-user-selection.component';\n\n@Component({\n  selector: 'app-chats',\n  templateUrl: './chats.page.html',\n  styleUrls: ['./chats.page.scss'],\n})\nexport class ChatsPage {\n  chats: Chat[] = [];\n  searchedChats: Chat[] = [];\n  user: User;\n  $chats: Subscription;\n  singleChats = [];\n  selectedChats = [];\n  user_img_empty = environment.user_img;\n  searchedText: string;\n  open_to_select: boolean = false;\n  loading: boolean = true;\n  constructor(\n    private _userService: UserService,\n    private _modalController: ModalController,\n    private _chatService: ChatService,\n    private _router: Router\n  ) {}\n\n  async ionViewWillEnter() {\n    this.user = await this._userService.getActiveUser();\n    this.getChats();\n  }\n\n  ionViewWillLeave() {\n    this.$chats.unsubscribe();\n  }\n\n  getChats() {\n    this.$chats = this._chatService.getChats().subscribe((data) => {\n      this.chats = data;\n      this.chats.forEach((item) => {\n        if (!item.is_group) {\n          let informations_user_date = item.informations.filter(\n            (active) => active.user['_id'] != this.user._id\n          )[0].date;\n          item['seen'] =\n            item['new_message_count'] == 0 &&\n            item.last_message_owner == this.user._id &&\n            new Date(item.last_message_time).getTime() <\n              new Date(informations_user_date).getTime();\n        }\n        if (!this.searchedText) this.searchedChats = [...this.chats];\n        else this.getChatBySearch();\n      });\n      setTimeout(() => {\n        this.loading = false;\n      }, 1000);\n    });\n  }\n\n  async createNewGroup() {\n    const modal = await this._modalController.create({\n      component: SpicaUserSelectionComponent,\n      componentProps: {\n        users: this.user.friends,\n      },\n    });\n\n    await modal.present();\n    const { data } = (await modal.onWillDismiss()) as {\n      data: { users: User[] };\n    };\n    if (data.users.length) {\n      this.loading = true;\n      let name;\n      if (data.users.length == 1) name = data.users[0].username;\n      else name = `${data.users[0].username}, ${data.users[1].username}...`;\n      data.users.unshift(this.user);\n      let chatExists = await this._chatService.isChatExists(data.users);\n      if (!chatExists.result) {\n        if (data.users.length == 2) {\n          let opponent = data.users.find((user) => this.user._id != user._id);\n          this.navigateToChat(opponent);\n        } else\n          this._chatService.createChat({\n            managers: [this.user._id],\n            name: name,\n            is_group: data.users.length > 2,\n            informations: data.users.map((user) => {\n              return { user: user._id };\n            }) as [],\n          });\n      } else {\n        this._router.navigate([\n          `chat/tabs/chats/${chatExists.chat['_id']}`,\n          { chat: JSON.stringify(chatExists.chat) },\n        ]);\n      }\n    }\n  }\n\n  navigateToChat(user) {\n    this._router.navigate([\n      `chat/tabs/chats/${undefined}`,\n      { user: JSON.stringify(user) },\n    ]);\n  }\n\n  async deleteChats() {\n    this.loading = true;\n    let selectedChats = this.chats.filter((cg) =>\n      this.selectedChats.some((sc) => cg._id == sc)\n    );\n    for (let chat_item of selectedChats) {\n      chat_item.informations.filter(\n        (la) => la.user['_id'] == this.user._id\n      )[0].status = 'deleted';\n\n      chat_item.informations = chat_item.informations.map((item) => {\n        item.user = item.user['_id'];\n        return item;\n      });\n      if (\n        chat_item.is_group &&\n        !chat_item.informations.filter(\n          (item) =>\n            item.status == 'active' &&\n            chat_item.managers.includes(item.user as any)\n        )[0]\n      ) {\n        chat_item.managers = [\n          chat_item.informations.filter((item) => item.status == 'active')[0]\n            .user as any,\n        ];\n      }\n      chat.update(chat_item as any).then();\n      this.chats = this.chats.filter(\n        (chatGroup: Chat) => chatGroup._id != chat_item._id\n      );\n      this.selectedChats = [];\n    }\n    this.open_to_select = false;\n    this.searchedChats = this.chats;\n  }\n\n  selectToRemove(chatID) {\n    let isExists = this.selectedChats.filter((chat) => chat == chatID);\n    if (isExists.length) {\n      this.selectedChats = this.selectedChats.filter((chat) => chat != chatID);\n    } else {\n      this.selectedChats.push(chatID);\n    }\n  }\n\n  clickedToChat(chat) {\n    if (this.selectedChats.length || this.open_to_select) {\n      this.selectToRemove(chat._id);\n    } else {\n      this.searchedText = '';\n      this._router.navigate([\n        `/chat/tabs/chats/${chat._id}`,\n        { chat: JSON.stringify(chat) },\n      ]);\n    }\n  }\n  getChatBySearch() {\n    this.searchedChats = this.chats.filter((item) =>\n      item.name.toLowerCase().includes(this.searchedText.toLocaleLowerCase())\n    );\n  }\n  openSelection() {\n    this.open_to_select = !this.open_to_select;\n    if (!this.open_to_select) this.selectedChats = [];\n  }\n}\n","export default \":host ::ng-deep user-minified-card {\\n  margin: unset !important;\\n}\\n:host ::ng-deep user-minified-card ion-avatar {\\n  width: 40px;\\n  height: 40px;\\n  min-width: 40px !important;\\n}\\n:host .edit_content {\\n  padding: 10px 20px 10px 10px;\\n}\\n:host .edit_content ion-input {\\n  max-width: calc(100% - 20px);\\n  text-overflow: ellipsis;\\n}\\n:host .suffix-icon {\\n  bottom: 25% !important;\\n  border-left: 1px solid var(--border-color);\\n  padding-left: 10px;\\n}\\n:host .group_image {\\n  position: relative;\\n  width: 50px;\\n  height: 50px;\\n}\\n:host .group_image .edit_image {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n}\\n:host .group_image .edit_image ::ng-deep ion-icon {\\n  font-size: 15px;\\n}\\n:host .text_right {\\n  width: 100%;\\n  text-align: end;\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-end;\\n}\\n:host .text_right ion-label {\\n  font-size: 12px;\\n  padding-right: 10px;\\n}\\n:host .text-left {\\n  display: flex;\\n  align-items: center;\\n}\\n:host .text-left ion-avatar {\\n  width: 35px;\\n  height: 35px;\\n  min-width: 35px;\\n  margin-right: 10px;\\n}\\n:host ion-list {\\n  padding: 0 10px;\\n}\\n:host ion-list ion-list-header {\\n  padding-bottom: 10px;\\n  border-bottom: 1px solid var(--ion-color-light-shade);\\n  margin-bottom: 5px;\\n}\\n:host ion-list ion-list-header ion-label > div {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding-right: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtZGV0YWlsLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFSTtFQUNFLHdCQUFBO0FBRE47QUFFTTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsMEJBQUE7QUFBUjtBQUlFO0VBQ0UsNEJBQUE7QUFGSjtBQUdJO0VBQ0UsNEJBQUE7RUFDQSx1QkFBQTtBQUROO0FBSUU7RUFDRSxzQkFBQTtFQUNBLDBDQUFBO0VBQ0Esa0JBQUE7QUFGSjtBQUlFO0VBQ0Usa0JBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtBQUZKO0FBR0k7RUFDRSxrQkFBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0VBQ0EsZ0NBQUE7QUFETjtBQUdRO0VBQ0UsZUFBQTtBQURWO0FBTUU7RUFDRSxXQUFBO0VBQ0EsZUFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHlCQUFBO0FBSko7QUFLSTtFQUNFLGVBQUE7RUFDQSxtQkFBQTtBQUhOO0FBTUU7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7QUFKSjtBQUtJO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7QUFITjtBQU1FO0VBQ0UsZUFBQTtBQUpKO0FBTUk7RUFDRSxvQkFBQTtFQUNBLHFEQUFBO0VBQ0Esa0JBQUE7QUFKTjtBQUtNO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsOEJBQUE7RUFDQSxtQkFBQTtBQUhSIiwiZmlsZSI6ImNoYXQtZGV0YWlsLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgOjpuZy1kZWVwIHtcbiAgICB1c2VyLW1pbmlmaWVkLWNhcmQge1xuICAgICAgbWFyZ2luOiB1bnNldCAhaW1wb3J0YW50O1xuICAgICAgaW9uLWF2YXRhciB7XG4gICAgICAgIHdpZHRoOiA0MHB4O1xuICAgICAgICBoZWlnaHQ6IDQwcHg7XG4gICAgICAgIG1pbi13aWR0aDogNDBweCAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAuZWRpdF9jb250ZW50IHtcbiAgICBwYWRkaW5nOiAxMHB4IDIwcHggMTBweCAxMHB4O1xuICAgIGlvbi1pbnB1dCB7XG4gICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwJSAtIDIwcHgpO1xuICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgfVxuICB9XG4gIC5zdWZmaXgtaWNvbiB7XG4gICAgYm90dG9tOiAyNSUgIWltcG9ydGFudDtcbiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7XG4gICAgcGFkZGluZy1sZWZ0OiAxMHB4O1xuICB9XG4gIC5ncm91cF9pbWFnZSB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHdpZHRoOiA1MHB4O1xuICAgIGhlaWdodDogNTBweDtcbiAgICAuZWRpdF9pbWFnZSB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDUwJTtcbiAgICAgIGxlZnQ6IDUwJTtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgICAgOjpuZy1kZWVwIHtcbiAgICAgICAgaW9uLWljb24ge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAudGV4dF9yaWdodCB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgdGV4dC1hbGlnbjogZW5kO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgIGlvbi1sYWJlbCB7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBwYWRkaW5nLXJpZ2h0OiAxMHB4O1xuICAgIH1cbiAgfVxuICAudGV4dC1sZWZ0IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgaW9uLWF2YXRhciB7XG4gICAgICB3aWR0aDogMzVweDtcbiAgICAgIGhlaWdodDogMzVweDtcbiAgICAgIG1pbi13aWR0aDogMzVweDtcbiAgICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICB9XG4gIH1cbiAgaW9uLWxpc3Qge1xuICAgIHBhZGRpbmc6IDAgMTBweDtcblxuICAgIGlvbi1saXN0LWhlYWRlciB7XG4gICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDtcbiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1pb24tY29sb3ItbGlnaHQtc2hhZGUpO1xuICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgaW9uLWxhYmVsID4gZGl2IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4O1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19 */\";","export default \":host .messages-content {\\n  padding: 15px 0px;\\n  display: flex;\\n  flex-direction: column;\\n}\\n:host .date-divider {\\n  position: relative;\\n  margin: auto;\\n  color: var(--cd-component-text-color);\\n  font-size: 0.8rem;\\n  padding: 10px;\\n  width: 100%;\\n  text-align: center;\\n}\\n:host ion-backdrop {\\n  opacity: 1;\\n  background-position: center;\\n  background-repeat: no-repeat;\\n  background-size: contain;\\n  z-index: 10;\\n  position: fixed;\\n}\\n:host spica-upload-image {\\n  margin-right: 10px;\\n  align-self: center;\\n}\\n:host ion-toolbar .send_image {\\n  width: calc(100% - 20px);\\n  object-fit: cover;\\n  margin: 10px;\\n  max-height: 400px;\\n}\\n:host ion-footer ion-icon {\\n  align-self: center;\\n}\\n:host ion-footer ion-icon.clear-text {\\n  font-size: 18px;\\n  background: transparent;\\n  color: transparent;\\n  background-image: url(\\\"data:image/svg+xml;charset=utf-8,<svg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'><path%20fill='var(--ion-color-step-600,%20%23666666)'%20d='M403.1,108.9c-81.2-81.2-212.9-81.2-294.2,0s-81.2,212.9,0,294.2c81.2,81.2,212.9,81.2,294.2,0S484.3,190.1,403.1,108.9z%20M352,340.2L340.2,352l-84.4-84.2l-84,83.8L160,339.8l84-83.8l-84-83.8l11.8-11.8l84,83.8l84.4-84.2l11.8,11.8L267.6,256L352,340.2z'/></svg>\\\");\\n}\\n:host ion-infinite-scroll-content {\\n  min-height: 5px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtc2luZ2xlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDRTtFQUNFLGlCQUFBO0VBQ0EsYUFBQTtFQUNBLHNCQUFBO0FBQUo7QUFFRTtFQUNFLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLHFDQUFBO0VBQ0EsaUJBQUE7RUFDQSxhQUFBO0VBQ0EsV0FBQTtFQUNBLGtCQUFBO0FBQUo7QUFFRTtFQUNFLFVBQUE7RUFDQSwyQkFBQTtFQUNBLDRCQUFBO0VBQ0Esd0JBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtBQUFKO0FBRUU7RUFDRSxrQkFBQTtFQUNBLGtCQUFBO0FBQUo7QUFHSTtFQUNFLHdCQUFBO0VBQ0EsaUJBQUE7RUFDQSxZQUFBO0VBQ0EsaUJBQUE7QUFETjtBQUtJO0VBQ0Usa0JBQUE7QUFITjtBQUlNO0VBQ0UsZUFBQTtFQUNBLHVCQUFBO0VBQ0Esa0JBQUE7RUFDQSwyYkFBQTtBQUZSO0FBTUU7RUFDRSxlQUFBO0FBSkoiLCJmaWxlIjoiY2hhdC1zaW5nbGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xuICAubWVzc2FnZXMtY29udGVudCB7XG4gICAgcGFkZGluZzogMTVweCAwcHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICB9XG4gIC5kYXRlLWRpdmlkZXIge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBtYXJnaW46IGF1dG87XG4gICAgY29sb3I6IHZhcigtLWNkLWNvbXBvbmVudC10ZXh0LWNvbG9yKTtcbiAgICBmb250LXNpemU6IDAuOHJlbTtcbiAgICBwYWRkaW5nOiAxMHB4O1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgfVxuICBpb24tYmFja2Ryb3Age1xuICAgIG9wYWNpdHk6IDE7XG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO1xuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gICAgYmFja2dyb3VuZC1zaXplOiBjb250YWluO1xuICAgIHotaW5kZXg6IDEwO1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgfVxuICBzcGljYS11cGxvYWQtaW1hZ2Uge1xuICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICBhbGlnbi1zZWxmOiBjZW50ZXI7XG4gIH1cbiAgaW9uLXRvb2xiYXIge1xuICAgIC5zZW5kX2ltYWdlIHtcbiAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAyMHB4KTtcbiAgICAgIG9iamVjdC1maXQ6IGNvdmVyO1xuICAgICAgbWFyZ2luOiAxMHB4O1xuICAgICAgbWF4LWhlaWdodDogNDAwcHg7XG4gICAgfVxuICB9XG4gIGlvbi1mb290ZXIge1xuICAgIGlvbi1pY29uIHtcbiAgICAgIGFsaWduLXNlbGY6IGNlbnRlcjtcbiAgICAgICYuY2xlYXItdGV4dCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgIGNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsPHN2ZyUyMHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyclMjB2aWV3Qm94PScwJTIwMCUyMDUxMiUyMDUxMic+PHBhdGglMjBmaWxsPSd2YXIoLS1pb24tY29sb3Itc3RlcC02MDAsJTIwJTIzNjY2NjY2KSclMjBkPSdNNDAzLjEsMTA4LjljLTgxLjItODEuMi0yMTIuOS04MS4yLTI5NC4yLDBzLTgxLjIsMjEyLjksMCwyOTQuMmM4MS4yLDgxLjIsMjEyLjksODEuMiwyOTQuMiwwUzQ4NC4zLDE5MC4xLDQwMy4xLDEwOC45eiUyME0zNTIsMzQwLjJMMzQwLjIsMzUybC04NC40LTg0LjJsLTg0LDgzLjhMMTYwLDMzOS44bDg0LTgzLjhsLTg0LTgzLjhsMTEuOC0xMS44bDg0LDgzLjhsODQuNC04NC4ybDExLjgsMTEuOEwyNjcuNiwyNTZMMzUyLDM0MC4yeicvPjwvc3ZnPlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaW9uLWluZmluaXRlLXNjcm9sbC1jb250ZW50IHtcbiAgICBtaW4taGVpZ2h0OiA1cHg7XG4gIH1cbn1cbiJdfQ== */\";","export default \":host .empty_chat {\\n  width: 100%;\\n  text-align: center;\\n  font-size: smaller;\\n}\\n:host .chats-content {\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n}\\n:host .chats-content ion-list {\\n  overflow: auto;\\n  flex: 1;\\n  padding: 0 10px;\\n}\\n:host .chats-content ion-list ion-item {\\n  touch-action: pan-y !important;\\n}\\n:host .chat-group ion-avatar {\\n  width: 48px;\\n  height: 48px;\\n  margin-right: 10px;\\n}\\n:host .chat-group .chat-header {\\n  display: flex;\\n  width: 100%;\\n}\\n:host .chat-group .chat-header h3 {\\n  font-weight: 600;\\n}\\n:host .chat-group .chat-header span {\\n  font-size: 11px;\\n  padding-left: 10px;\\n  padding-top: 2px;\\n  font-weight: 300;\\n  color: var(--ion-color-medium-shade);\\n}\\n:host .chat-group p {\\n  width: 100%;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n}\\n:host .chat-group .empty-chat {\\n  font-weight: 400;\\n  font-style: italic;\\n}\\n:host .selected {\\n  background: var(--ion-color-light-shade);\\n}\\n:host ion-label .message p {\\n  color: var(--ion-color-medium-shade);\\n  width: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXRzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDRTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0FBQUo7QUFFRTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLFlBQUE7QUFBSjtBQUNJO0VBQ0UsY0FBQTtFQUNBLE9BQUE7RUFDQSxlQUFBO0FBQ047QUFBTTtFQUNFLDhCQUFBO0FBRVI7QUFHSTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7QUFETjtBQUdJO0VBQ0UsYUFBQTtFQUNBLFdBQUE7QUFETjtBQUVNO0VBQ0UsZ0JBQUE7QUFBUjtBQUVNO0VBQ0UsZUFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxnQkFBQTtFQUNBLG9DQUFBO0FBQVI7QUFHSTtFQUNFLFdBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0EsZ0JBQUE7QUFETjtBQUdJO0VBQ0UsZ0JBQUE7RUFDQSxrQkFBQTtBQUROO0FBSUU7RUFDRSx3Q0FBQTtBQUZKO0FBTU07RUFDRSxvQ0FBQTtFQUNBLFdBQUE7QUFKUiIsImZpbGUiOiJjaGF0cy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gIC5lbXB0eV9jaGF0IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgZm9udC1zaXplOiBzbWFsbGVyO1xuICB9XG4gIC5jaGF0cy1jb250ZW50IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGlvbi1saXN0IHtcbiAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgZmxleDogMTtcbiAgICAgIHBhZGRpbmc6IDAgMTBweDtcbiAgICAgIGlvbi1pdGVtIHtcbiAgICAgICAgdG91Y2gtYWN0aW9uOiBwYW4teSAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAuY2hhdC1ncm91cCB7XG4gICAgaW9uLWF2YXRhciB7XG4gICAgICB3aWR0aDogNDhweDtcbiAgICAgIGhlaWdodDogNDhweDtcbiAgICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICB9XG4gICAgLmNoYXQtaGVhZGVyIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGgzIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIH1cbiAgICAgIHNwYW4ge1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIHBhZGRpbmctbGVmdDogMTBweDtcbiAgICAgICAgcGFkZGluZy10b3A6IDJweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDMwMDtcbiAgICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1tZWRpdW0tc2hhZGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBwIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB9XG4gICAgLmVtcHR5LWNoYXQge1xuICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICB9XG4gIH1cbiAgLnNlbGVjdGVkIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItbGlnaHQtc2hhZGUpO1xuICB9XG4gIGlvbi1sYWJlbCB7XG4gICAgLm1lc3NhZ2Uge1xuICAgICAgcCB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbWVkaXVtLXNoYWRlKTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0= */\";","export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Group Information</ion-title>\\n    <!-- <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"updateGroup()\\\">\\n       \\n      </ion-button>\\n    </ion-buttons> -->\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div *ngIf=\\\"chatGroup as chat\\\">\\n    <ion-item class=\\\"edit_content\\\">\\n      <ion-avatar slot=\\\"start\\\" class=\\\"group_image\\\">\\n        <img [src]=\\\"chatGroup.image ? chatGroup.image : user_img_empty\\\" />\\n        <spica-upload-image\\n          *ngIf=\\\"chatGroup.managers.includes(me._id)\\\"\\n          class=\\\"edit_image\\\"\\n          (change)=\\\"changeImage($event)\\\"\\n        ></spica-upload-image>\\n      </ion-avatar>\\n      <ion-input\\n        *ngIf=\\\"chatGroup.managers.includes(me._id)\\\"\\n        [(ngModel)]=\\\"chatGroup.name\\\"\\n      ></ion-input>\\n      <ion-label *ngIf=\\\"!chatGroup.managers.includes(me._id)\\\">\\n        {{chatGroup.name}}\\n      </ion-label>\\n      <ion-icon\\n        (click)=\\\"updateGroup()\\\"\\n        *ngIf=\\\"!loading.name && chatGroup?.managers.includes(me._id)\\\"\\n        name=\\\"checkmark-outline\\\"\\n        class=\\\"suffix-icon\\\"\\n      >\\n      </ion-icon>\\n      <ion-spinner class=\\\"suffix-icon\\\" *ngIf=\\\"loading.name\\\"></ion-spinner>\\n    </ion-item>\\n    <ion-list lines=\\\"full\\\">\\n      <ion-list-header class=\\\"ion-no-padding\\\">\\n        <ion-label\\n          ><div>\\n            Users\\n            <ion-icon\\n              *ngIf=\\\"chatGroup.managers.includes(me._id)\\\"\\n              (click)=\\\"addUsers()\\\"\\n              name=\\\"person-add-outline\\\"\\n            ></ion-icon></div\\n        ></ion-label>\\n      </ion-list-header>\\n      <ng-container *ngFor=\\\"let user of users\\\">\\n        <ion-item class=\\\"ion-no-padding\\\">\\n          <div class=\\\"text-left\\\" [routerLink]=\\\"['profile',user._id]\\\">\\n            <ion-avatar>\\n              <img [src]=\\\"user.thumbnail || user_img_empty\\\" alt=\\\"\\\" />\\n            </ion-avatar>\\n            <ion-label> {{user.username}} </ion-label>\\n          </div>\\n\\n          <div (click)=\\\"showActions(user)\\\" class=\\\"text_right\\\">\\n            <ion-label *ngIf=\\\"chatGroup.managers.includes(user._id)\\\">\\n              Manager\\n            </ion-label>\\n            <ion-icon\\n              *ngIf=\\\"chatGroup.managers.includes(me._id)\\\"\\n              name=\\\"cog-outline\\\"\\n            ></ion-icon>\\n          </div>\\n        </ion-item>\\n      </ng-container>\\n    </ion-list>\\n  </div>\\n</ion-content>\\n<ion-footer class=\\\"ion-no-border\\\" *ngIf=\\\"chatGroup as chat\\\">\\n  <ion-toolbar>\\n    <ion-button class=\\\"button-delete\\\" expand=\\\"full\\\" (click)=\\\"deleteGroup()\\\">\\n      Leave from group</ion-button\\n    >\\n  </ion-toolbar>\\n</ion-footer>\\n\";","export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"chat/tabs/chats\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title\\n      *ngIf=\\\"chatGroup\\\"\\n      [routerLink]=\\\"chatGroup.is_group ? ['chat_detail'] : ['profile',singleUserId]\\\"\\n      >{{chatGroup.name}}\\n    </ion-title>\\n    <ion-buttons *ngIf=\\\"chatGroup && chatGroup?.is_group\\\" slot=\\\"end\\\">\\n      <ion-button [routerLink]=\\\"['chat_detail']\\\">\\n        <ion-icon name=\\\"ellipsis-vertical\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content #content>\\n  <ion-infinite-scroll\\n    position=\\\"top\\\"\\n    threshold=\\\"0px\\\"\\n    (ionInfinite)=\\\"loadData()\\\"\\n  >\\n    <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n  <ng-container\\n    *ngIf=\\\"(usersInChatGroup && me) && ((chatGroup.is_group && usersInChatGroup[me._id]?.status == 'active') || !chatGroup.is_group)\\\"\\n  >\\n    <ng-container *ngFor=\\\"let message of messages;let index = index\\\">\\n      <div class=\\\"date-divider\\\" *ngIf=\\\"message['first_message']\\\">\\n        {{message.created_at |date: \\\"dd/MM/YYYY\\\"}}\\n      </div>\\n      <message-single\\n        [date]=\\\"message.created_at\\\"\\n        [recurring]=\\\"message['recurring']\\\"\\n        [avatar]=\\\"!messages[(index + 1)] || messages[(index + 1)].owner != message.owner ? usersInChatGroup[message.owner].user.thumbnail : 'none'\\\"\\n        [message]=\\\"message.message\\\"\\n        [isCurrentUser]=\\\"message.owner == me._id\\\"\\n        [image]=\\\"message.image\\\"\\n        [id]=\\\"usersInChatGroup[message.owner].user._id\\\"\\n        mode=\\\"chat\\\"\\n      ></message-single>\\n    </ng-container>\\n  </ng-container>\\n  <ng-container\\n    *ngIf=\\\"(usersInChatGroup && me) && usersInChatGroup[me._id]?.status != 'active' && chatGroup.is_group\\\"\\n  >\\n    <div class=\\\"empty-placeholder\\\">\\n      You can't see any message because you are not in this chat group anymore\\n    </div>\\n  </ng-container>\\n\\n  <ion-spinner\\n    class=\\\"spinner-center-page\\\"\\n    name=\\\"crescent\\\"\\n    *ngIf=\\\"loading\\\"\\n  ></ion-spinner>\\n</ion-content>\\n<ion-footer class=\\\"ion-no-border\\\">\\n  <ion-toolbar\\n    *ngIf=\\\"(usersInChatGroup && me) && ((usersInChatGroup[me._id]?.status == 'active' && chatGroup.is_group) || !chatGroup.is_group)\\\"\\n  >\\n    <ion-item *ngIf=\\\"image_message\\\">\\n      <img class=\\\"send_image\\\" [src]=\\\"image_message\\\" />\\n    </ion-item>\\n    <ion-item lines=\\\"none\\\">\\n      <spica-upload-image slot=\\\"start\\\"\\n        *ngIf=\\\"!loading_image &&!message && !image_message\\\"\\n        (change)=\\\"sendImage($event)\\\"\\n      ></spica-upload-image>\\n      <ion-textarea\\n        *ngIf=\\\"!image_message\\\"\\n        [(ngModel)]=\\\"message\\\"\\n        placeholder=\\\"Send Message\\\"\\n        enterkeyhint=\\\"send\\\"\\n        autoGrow=\\\"true\\\"\\n        rows=\\\"1\\\"\\n      ></ion-textarea>\\n      <ion-icon\\n        class=\\\"clear-text\\\"\\n        *ngIf=\\\"message\\\"\\n        (click)=\\\"message=''\\\"\\n        name=\\\"close-circle-outline\\\"\\n      ></ion-icon>\\n      <ion-spinner\\n        *ngIf=\\\"loading_image\\\"\\n        name=\\\"crescent\\\"\\n        slot=\\\"end\\\"\\n      ></ion-spinner>\\n      <ion-icon\\n        *ngIf=\\\"!loading_image && !message && image_message\\\"\\n        name=\\\"close\\\"\\n        slot=\\\"end\\\"\\n        (click)=\\\"cancelImage()\\\"\\n      >\\n      </ion-icon>\\n      <ion-icon\\n        *ngIf=\\\"!loading_image\\\"\\n        name=\\\"send-outline\\\"\\n        slot=\\\"end\\\"\\n        (click)=\\\"sendMessage()\\\"\\n      ></ion-icon>\\n    </ion-item>\\n  </ion-toolbar>\\n</ion-footer>\\n\";","export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Chats</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button *ngIf=\\\"!selectedChats.length\\\" (click)=\\\"createNewGroup()\\\">\\n        <ion-icon name=\\\"add-circle-outline\\\"></ion-icon>\\n      </ion-button>\\n      <ion-button *ngIf=\\\"selectedChats.length\\\" (click)=\\\"deleteChats()\\\">\\n        <ion-icon name=\\\"trash-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"chats-content\\\">\\n    <ion-item\\n      *ngIf=\\\"searchedChats.length || searchedText\\\"\\n      lines=\\\"none\\\"\\n      class=\\\"ion-no-padding\\\"\\n      mode=\\\"ios\\\"\\n    >\\n      <ion-searchbar\\n        mode=\\\"ios\\\"\\n        animated\\n        debounce=\\\"500\\\"\\n        placeholder=\\\"Search\\\"\\n        [(ngModel)]=\\\"searchedText\\\"\\n        (ngModelChange)=\\\"getChatBySearch()\\\"\\n      ></ion-searchbar>\\n      <ion-label (click)=\\\"openSelection()\\\" slot=\\\"end\\\">\\n        {{open_to_select ? \\\"cancel\\\" : \\\"select\\\"}}\\n      </ion-label>\\n    </ion-item>\\n    <ion-list *ngIf=\\\"!loading\\\">\\n      <ion-item *ngIf=\\\"!searchedChats.length && !searchedText\\\">\\n        <div class=\\\"empty_chat\\\">There is no chat yet</div>\\n      </ion-item>\\n      <ion-item\\n        class=\\\"chat-group\\\"\\n        [class.selected]=\\\"selectedChats.includes(chat._id)\\\"\\n        *ngFor=\\\"let chat of searchedChats\\\"\\n        (click)=\\\"clickedToChat(chat)\\\"\\n        detail=\\\"true\\\"\\n      >\\n        <ion-checkbox\\n          *ngIf=\\\"open_to_select\\\"\\n          slot=\\\"start\\\"\\n          value=\\\"buford\\\"\\n        ></ion-checkbox>\\n        <ion-avatar slot=\\\"start\\\">\\n          <img [src]=\\\"chat.image ? chat.image : user_img_empty\\\" />\\n        </ion-avatar>\\n        <ion-label>\\n          <div class=\\\"chat-header\\\">\\n            <h3>{{chat.name}}</h3>\\n            <span *ngIf=\\\"chat.last_message && !chat['seen']\\\"\\n              >{{chat.last_message_time|date:\\\"shortDate\\\"}}\\n            </span>\\n          </div>\\n          <p class=\\\"empty-chat\\\" *ngIf=\\\"chat.last_message&&chat['seen']\\\">Seen</p>\\n          <div class=\\\"message\\\" *ngIf=\\\"chat.last_message&&!chat['seen']\\\">\\n            <p>{{ chat.last_message}}</p>\\n          </div>\\n          <p class=\\\"empty-chat\\\" *ngIf=\\\"!chat.last_message\\\">\\n            No message in this chat\\n          </p>\\n        </ion-label>\\n        <ion-badge *ngIf=\\\"chat['new_message_count']\\\" slot=\\\"end\\\" color=\\\"success\\\"\\n          >{{chat['new_message_count']}}\\n        </ion-badge>\\n      </ion-item>\\n    </ion-list>\\n  </div>\\n  <ion-spinner\\n    *ngIf=\\\"loading\\\"\\n    class=\\\"spinner-center-page\\\"\\n    name=\\\"crescent\\\"\\n  ></ion-spinner>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}