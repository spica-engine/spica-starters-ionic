{"version":3,"sources":["./src/app/appointment/pages/profile/profile-routing.module.ts","./src/app/appointment/pages/profile/profile.module.ts","./src/app/appointment/pages/profile/profile.page.ts","./src/app/social-media/services/environment.ts","./src/app/social-media/services/image.service.ts","./src/app/appointment/pages/profile/profile.page.scss","./src/app/appointment/pages/profile/profile.page.html"],"names":[],"mappings":"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","file":"src_app_appointment_pages_profile_profile_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ProfilePage } from './profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProfilePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProfilePageRoutingModule } from './profile-routing.module';\n\nimport { ProfilePage } from './profile.page';\nimport { SpicaComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ProfilePageRoutingModule,\n    SpicaComponentsModule\n  ],\n  declarations: [ProfilePage]\n})\nexport class ProfilePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from '../../services/auth.service';\nimport * as DataService from '../../services/bucket';\nimport { Item } from 'src/app/components/spica-item-list/spica-item-list.component';\nimport { ImageService } from 'src/app/social-media/services/image.service';\nimport { environment } from '../../services/environment';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.page.html',\n  styleUrls: ['./profile.page.scss'],\n})\nexport class ProfilePage implements OnInit {\n  user: DataService.Employee;\n  listItems: Item[] = [];\n  isLoading: boolean = true;\n  constructor(\n    private _authService: AuthService,\n    private _imageService: ImageService\n  ) {\n    this._authService.initBucket();\n  }\n\n  ngOnInit() {}\n\n  async ionViewWillEnter() {\n    this.isLoading = true;\n    this.user = await this._authService.getUser().toPromise();\n\n    this.listItems = [\n      { key: 'username', value: '', seperate: true },\n      { key: 'name', value: '', seperate: true },\n      { key: 'surname', value: '', seperate: true },\n    ];\n    this.listItems.forEach(\n      (item) => (item.value = this.user[item.key] ? this.user[item.key] : '')\n    );\n    this.isLoading = false;\n  }\n\n  logout() {\n    this.isLoading = true;\n    this._authService.logout();\n  }\n  imageChange(data) {\n    let mimetype = data.split(';')[0].split(':')[1];\n    let file_buf = this._imageService.toBuffer(data);\n    let bufWithMeta = {\n      contentType: mimetype,\n      data: file_buf,\n      name: 'image',\n    };\n    let imageId;\n    if (\n      this.user.picture &&\n      this.user.picture.includes(environment.project_id)\n    ) {\n      let splitArr = this.user.picture.split('/');\n      imageId = splitArr[splitArr.length - 1].split('?')[0];\n    }\n    this._imageService.insert(bufWithMeta, imageId).then(async (res) => {\n      this.user.picture = res.url + `&timestamp=${new Date().getTime()}`;\n      await DataService.employee.patch({\n        _id: this.user._id,\n        picture: this.user.picture,\n      });\n    });\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  project_id: 'spica-starters-7229b',\n  api_url: 'https://spica-starters-7229b.hq.spicaengine.com/api',\n  public_apikey: 'axfb9k1akx06fe2u',\n  production: false,\n  webURL: '',\n  user_img:\n    'https://storage.googleapis.com/download/storage/v1/b/hq-spica-starters-7229b/o/61b70351fcfbb9002efed548?alt=media&timestamp=1639383890618',\n  languages: [\n    { code: 'en', name: 'English' },\n    { code: 'tr', name: 'Turkish' },\n    { code: 'ru', name: 'Russian' },\n  ],\n  example_base64:\n    'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAAAAAAALAAAAAABAAEAAAICTAEAOw==',\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Injectable } from '@angular/core';\nimport * as Storage from '@spica-devkit/storage';\nimport { environment } from './environment';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ImageService {\n  constructor() {}\n\n  private init() {\n    let initializeConfig;\n    if (localStorage.getItem('socialmedia_spica_token')) {\n      initializeConfig = {\n        publicUrl: environment.api_url,\n        identity: localStorage.getItem('socialmedia_spica_token'),\n      };\n    } else {\n      initializeConfig = {\n        publicUrl: environment.api_url,\n        apikey: environment.public_apikey,\n      };\n    }\n    Storage.initialize(initializeConfig);\n  }\n\n  insert(storageObject, imageId): Promise<Storage.StorageObject> {\n    this.init();\n    if (imageId) {\n      return Storage.update(imageId, storageObject);\n    } else {\n      return Storage.insert(storageObject).then((v) => (v = v[0]));\n    }\n  }\n\n  toBuffer(base64, type = '') {\n    base64 = base64.split(',')[1];\n    const binaryString = window.atob(base64);\n    const len = binaryString.length;\n    const bytes = new Uint8Array(len);\n    for (let i = 0; i < len; i++) {\n      bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n  }\n}\n","export default \":host .button-container {\\n  width: 100%;\\n  display: flex;\\n  margin-top: 15px;\\n}\\n:host .button-container .logout {\\n  width: 120px;\\n  margin: auto;\\n  --background: rgb(170, 0, 0);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2ZpbGUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVJO0VBQ0ksV0FBQTtFQUNBLGFBQUE7RUFDQSxnQkFBQTtBQURSO0FBRVE7RUFDSSxZQUFBO0VBQ0EsWUFBQTtFQUNBLDRCQUFBO0FBQVoiLCJmaWxlIjoicHJvZmlsZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdHtcblxuICAgIC5idXR0b24tY29udGFpbmVye1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICAgICAgLmxvZ291dHtcbiAgICAgICAgICAgIHdpZHRoOiAxMjBweDtcbiAgICAgICAgICAgIG1hcmdpbjogYXV0bztcbiAgICAgICAgICAgIC0tYmFja2dyb3VuZDogcmdiKDE3MCwgMCwgMCk7XG4gICAgICAgIH1cbiAgICB9XG59Il19 */\";","export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar>\\n    <ion-back-button slot=\\\"start\\\"></ion-back-button>\\n    <ion-title>Profile</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <spica-user-profile-picture\\n    *ngIf=\\\"!isLoading\\\"\\n    [imageEditable]=\\\"true\\\"\\n    [image]=\\\"user?.picture\\\"\\n    (changeImage)=\\\"imageChange($event)\\\"\\n  ></spica-user-profile-picture>\\n  <spica-item-list\\n    *ngIf=\\\"listItems.length>0 && !isLoading\\\"\\n    [items]=\\\"listItems\\\"\\n    (logout)=\\\"logout()\\\"\\n  ></spica-item-list>\\n\\n  <ion-spinner\\n    *ngIf=\\\"isLoading\\\"\\n    class=\\\"spinner-center-page\\\"\\n    name=\\\"crescent\\\"\\n  ></ion-spinner>\\n  <!-- <div class=\\\"button-container\\\">\\n    <ion-button class=\\\"logout\\\" (click)=\\\"logout()\\\">Log Out</ion-button>\\n  </div> -->\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}