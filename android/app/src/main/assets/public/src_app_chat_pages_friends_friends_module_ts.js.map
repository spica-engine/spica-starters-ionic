{"version":3,"sources":["./src/app/chat/pages/friends/friends-routing.module.ts","./src/app/chat/pages/friends/friends.module.ts","./src/app/chat/pages/friends/friends.page.ts","./src/app/chat/pages/friends/friends.page.scss","./src/app/chat/pages/friends/friends.page.html"],"names":[],"mappings":"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","file":"src_app_chat_pages_friends_friends_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FriendsPage } from './friends.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    children: [\n      { path: '', component: FriendsPage },\n      {\n        path: 'profile',\n        loadChildren: () =>\n          import('../profile/profile.module').then((m) => m.ProfilePageModule),\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FriendsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FriendsPageRoutingModule } from './friends-routing.module';\n\nimport { FriendsPage } from './friends.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    FriendsPageRoutingModule\n  ],\n  declarations: [FriendsPage]\n})\nexport class FriendsPageModule {}\n","import { Component } from '@angular/core';\nimport { CommonService } from 'src/app/services/common.service';\nimport { User } from '../../services/bucket';\nimport { environment } from '../../services/environment';\nimport { UserService } from '../../services/user.service';\n\n@Component({\n  selector: 'app-friends',\n  templateUrl: './friends.page.html',\n  styleUrls: ['./friends.page.scss'],\n})\nexport class FriendsPage {\n  friends: User[];\n  default_image = environment.user_img;\n  searchedText: string = '';\n  personAvailable: boolean = false;\n  loading: boolean = false;\n  searchedUser: User;\n\n  constructor(\n    private _userService: UserService,\n    private _commonService: CommonService\n  ) {}\n\n  async ionViewWillEnter() {\n    let me = await this._userService.getActiveUser();\n    this.friends = me.friends as User[];\n  }\n  async getUserBySearch() {\n    this.loading = true;\n\n    if (this.searchedText == '') {\n      this.loading = false;\n      this.personAvailable = false;\n      return;\n    }\n    let users = await this._userService.getUserByUsername(this.searchedText);\n    this.searchedUser = users[0];\n    if (!this.searchedUser) {\n      this._commonService.presentToast(\n        `No person named ${this.searchedText} was found`,\n        1000\n      );\n      this.loading = false;\n      return;\n    }\n    if (this.friends.some((item) => item._id == this.searchedUser._id))\n      this._commonService.presentToast(\n        `${this.searchedText} is already your friend`,\n        1000\n      );\n    else this.personAvailable = true;\n    this.loading = false;\n  }\n  addPerson() {\n    if (this.searchedUser) {\n      this._userService.me.friends.push(this.searchedUser as any);\n      this._userService.updateProfile(this._userService.me);\n      this._commonService.presentToast(\n        `${this.searchedText} succesfully added`,\n        2000\n      );\n      this.searchedText = '';\n      this.searchedUser = undefined;\n      this.personAvailable = false;\n    }\n  }\n}\n","export default \":host .my-friends ion-list-header {\\n  padding-left: 10px;\\n}\\n:host .my-friends ion-item {\\n  padding: 5px 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyaWVuZHMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVJO0VBQ0Usa0JBQUE7QUFETjtBQUdJO0VBQ0UsaUJBQUE7QUFETiIsImZpbGUiOiJmcmllbmRzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgLm15LWZyaWVuZHMge1xuICAgIGlvbi1saXN0LWhlYWRlciB7XG4gICAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG4gICAgfVxuICAgIGlvbi1pdGVtIHtcbiAgICAgIHBhZGRpbmc6IDVweCAxMHB4O1xuICAgIH1cbiAgfVxufVxuIl19 */\";","export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>My Friends</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"my-friends\\\">\\n    <ion-list>\\n      <ion-item>\\n        <ion-searchbar\\n          mode=\\\"ios\\\"\\n          animated\\n          debounce=\\\"1000\\\"\\n          placeholder=\\\"Add User By Username\\\"\\n          [(ngModel)]=\\\"searchedText\\\"\\n          (ngModelChange)=\\\"getUserBySearch()\\\"\\n        ></ion-searchbar>\\n        <ion-icon *ngIf=\\\"personAvailable && !this.loading\\\" (click)=\\\"addPerson()\\\" name=\\\"person-add-outline\\\"></ion-icon>\\n        <ion-spinner *ngIf=\\\"this.loading\\\" name=\\\"crescent\\\"></ion-spinner>\\n      </ion-item>\\n      <ion-item\\n        *ngFor=\\\"let friend of friends\\\"\\n        [routerLink]=\\\"['profile',friend['_id']]\\\"\\n      >\\n        <ion-avatar slot=\\\"start\\\">\\n          <img [src]=\\\"friend['thumbnail'] ||default_image \\\" />\\n        </ion-avatar>\\n        <ion-label> {{friend['username']}} </ion-label>\\n      </ion-item>\\n    </ion-list>\\n  </div>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}