{"version":3,"sources":["./src/app/social-media/pages/activity/activity-routing.module.ts","./src/app/social-media/pages/activity/activity.module.ts","./src/app/social-media/pages/activity/activity.page.ts","./src/app/social-media/pages/activity/activity.page.scss","./src/app/social-media/pages/activity/activity.page.html"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AACR;AAE/C,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,QAAQ,EAAE;YACR;gBACE,IAAI,EAAE,EAAE;gBACR,SAAS,EAAE,wDAAY;aACxB;YACD;gBACE,IAAI,EAAE,SAAS;gBACf,YAAY,EAAE,GAAG,EAAE,CACjB,sPAAiD,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,uBAAuB,CAAC;aAC3F;YACD;gBACE,IAAI,EAAE,kBAAkB;gBACxB,YAAY,EAAE,GAAG,EAAE,CACjB,6NAAqD,CAAC,IAAI,CACxD,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,yBAAyB,CACnC;aACJ;SAEF;KACF;CACF,CAAC;IAMW,yBAAyB,SAAzB,yBAAyB;CAAG;AAA5B,yBAAyB;IAJrC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,yBAAyB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;ACjCG;AACM;AACF;AAEA;AAEyB;AACvB;AACO;AACgB;IAezD,kBAAkB,SAAlB,kBAAkB;CAAG;AAArB,kBAAkB;IAb9B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,+EAAyB;YACzB,2EAAgB;YAChB,yEAAwB,EAAE;SAC3B;QACD,YAAY,EAAE;YACZ,wDAAY;SACb;KACF,CAAC;GACW,kBAAkB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxB8B;AACf;AAEoB;AAET;AACC;IAO7C,YAAY,SAAZ,YAAY;IAevB,YACU,gBAAiC,EACjC,YAAyB;QADzB,qBAAgB,GAAhB,gBAAgB,CAAiB;QACjC,iBAAY,GAAZ,YAAY,CAAa;QAbnC,eAAU,GAAe,EAAE,CAAC;QAC5B,YAAO,GAAY,IAAI,CAAC;QACxB,YAAO,GAAY,KAAK,CAAC;QACzB,sBAAiB,GAAG,CAAC,CAAC;QACtB,uBAAkB,GAAG,uEAAoB,CAAC;QAC1C,kBAAa,GAAG;YACd,IAAI,EAAE,CAAC;YACP,KAAK,EAAE,EAAE;SACV,CAAC;QACF,kBAAa,GAAW,EAAE,CAAC;IAKxB,CAAC;IACJ,QAAQ;QACN,IAAI,CAAC,gBAAgB;aAClB,iBAAiB,EAAE;aACnB,SAAS,EAAE;aACX,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,CAAC,CAAC;QACnD,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IACD,gBAAgB;QACd,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,CAAC;QACzC,IAAI,CAAC,YAAY;aACd,qBAAqB,EAAE;aACvB,IAAI,CACH,CAAC,YAAY,EAAE,EAAE,CACf,CAAC,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,CAAQ,CAAC,CACxE,CAAC;IACN,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;IACjC,CAAC;IAED,aAAa;QACX,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,gBAAgB;aACrC,aAAa,EAAE;aACf,SAAS,CAAC,CAAC,UAAU,EAAE,EAAE;;YACxB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;YAC7B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IACE,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM;gBACjE,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,IAAI,CAAC,EAC5C;gBACA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,IAAI,CAAC,UAAU,CACb,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,CACjE,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC;aACpB;YAED,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,UAAI,CAAC,YAAY,0CAAE,QAAQ,EAAE,CAAC;QAChC,CAAC,CAAC,CAAC;IACP,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,CAAC;IAC3C,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,gBAAgB,CAAC,UAAU,EAAE,CAAC;IACrC,CAAC;IAED,eAAe;QACb,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAED,SAAS;QACP,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;CACF;;YAxFQ,uEAAe;YAGf,+DAAW;;;2BAQjB,oDAAS,SAAC,wDAAY;;AADZ,YAAY;IALxB,wDAAS,CAAC;QACT,QAAQ,EAAE,cAAc;QACxB,6EAAmC;;KAEpC,CAAC;GACW,YAAY,CA8ExB;AA9EwB;;;;;;;;;;;;;;;;ACbzB,iEAAe,UAAU,uBAAuB,oBAAoB,8BAA8B,cAAc,GAAG,kBAAkB,iBAAiB,GAAG,oBAAoB,+BAA+B,GAAG,2BAA2B,uBAAuB,6BAA6B,kBAAkB,GAAG,mBAAmB,kBAAkB,uBAAuB,wBAAwB,0CAA0C,qBAAqB,uBAAuB,GAAG,mCAAmC,kBAAkB,uBAAuB,GAAG,yCAAyC,gBAAgB,iBAAiB,wBAAwB,GAAG,6CAA6C,gBAAgB,iBAAiB,sBAAsB,uBAAuB,4BAA4B,GAAG,oDAAoD,6CAA6C,uBAAuB,uBAAuB,4BAA4B,GAAG,yDAAyD,uBAAuB,aAAa,cAAc,qCAAqC,iBAAiB,oBAAoB,GAAG,2BAA2B,kBAAkB,gBAAgB,mCAAmC,oBAAoB,qBAAqB,wBAAwB,GAAG,6CAA6C,+uFAA+uF,E;;;;;;;;;;;;;;;ACAplI,iEAAe,+JAA+J,2BAA2B,goBAAgoB,wBAAwB,6GAA6G,+BAA+B,gLAAgL,sBAAsB,sQAAsQ,8BAA8B,2IAA2I,E","file":"src_app_social-media_pages_activity_activity_module_ts.js","sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { Routes, RouterModule } from \"@angular/router\";\nimport { ActivityPage } from \"./activity.page\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    children: [\n      {\n        path: \"\",\n        component: ActivityPage,\n      },\n      {\n        path: \"profile\",\n        loadChildren: () =>\n          import(\"../social-profile/social-profile.module\").then((m) => m.SocialProfilePageModule),\n      },\n      {\n        path: \"waiting-requests\",\n        loadChildren: () =>\n          import(\"../waiting-requests/waiting-requests.module\").then(\n            (m) => m.WaitingRequestsPageModule\n          ),\n      },\n      \n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ActivityPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ActivityPageRoutingModule } from './activity-routing.module';\nimport { ActivityPage } from './activity.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ComponentsModule } from '../../components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ActivityPageRoutingModule,\n    ComponentsModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [\n    ActivityPage,\n  ]\n})\nexport class ActivityPageModule {}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { IonRefresher } from '@ionic/angular';\nimport { Subscription } from 'rxjs';\nimport { ActivityService } from '../../services/activity.service';\nimport { Activity, User } from '../../services/bucket';\nimport { environment } from '../../services/environment';\nimport { UserService } from '../../services/user.service';\n\n@Component({\n  selector: 'app-activity',\n  templateUrl: './activity.page.html',\n  styleUrls: ['./activity.page.scss'],\n})\nexport class ActivityPage implements OnInit {\n  @ViewChild(IonRefresher) ionRefresher: IonRefresher;\n\n  $activities: Subscription;\n  activities: Activity[] = [];\n  loading: boolean = true;\n  showNew: boolean = false;\n  last_unseen_index = 0;\n  default_user_image = environment.user_img;\n  scroll_params = {\n    skip: 0,\n    limit: 10,\n  };\n  user_requests: User[] = [];\n\n  constructor(\n    private _activityService: ActivityService,\n    private _userService: UserService\n  ) {}\n  ngOnInit(): void {\n    this._activityService\n      .getUnseenActivity()\n      .toPromise()\n      .then((data) => (this.last_unseen_index = data));\n    this.getActivities();\n  }\n  ionViewWillEnter() {\n    this._activityService.getNewActivities();\n    this._userService\n      .getAllWaitingRequests()\n      .then(\n        (requestsData) =>\n          (this.user_requests = requestsData.map((item) => item.sender) as any)\n      );\n  }\n\n  ionViewWillLeave() {\n    this.$activities.unsubscribe();\n  }\n\n  getActivities() {\n    this.$activities = this._activityService\n      .getActivities()\n      .subscribe((activities) => {\n        this.activities = activities;\n        this.showNew = false;\n        if (\n          this._activityService.last_unseen_index != this.activities.length &&\n          this._activityService.last_unseen_index != 0\n        ) {\n          this.showNew = true;\n          this.activities[\n            this.activities.length - this._activityService.last_unseen_index\n          ]['border'] = true;\n        }\n\n        this.loading = false;\n        this.ionRefresher?.complete();\n      });\n  }\n\n  getNewActivities() {\n    this._activityService.getNewActivities();\n  }\n\n  changeSeenStatus() {\n    this._activityService.updateSeen();\n  }\n\n  ionViewDidLeave() {\n    this.changeSeenStatus();\n  }\n\n  doRefresh() {\n    this.loading = false;\n    this.changeSeenStatus();\n    this.getNewActivities();\n  }\n}\n","export default \":host p {\\n  text-align: center;\\n  font-size: 14px;\\n  color: rgba(0, 0, 0, 0.5);\\n  margin: 0;\\n}\\n:host ion-list {\\n  margin: 10px;\\n}\\n:host ion-list p {\\n  font-size: 12px !important;\\n}\\n:host ion-list ion-item {\\n  --padding-end: 0px;\\n  --inner-padding-end: 0px;\\n  padding: 10px;\\n}\\n:host .requests {\\n  display: flex;\\n  padding: 10px 15px;\\n  align-items: center;\\n  border: 1px solid rgba(0, 0, 0, 0.06);\\n  margin: 10px 5px;\\n  border-radius: 5px;\\n}\\n:host .requests .requests-users {\\n  display: flex;\\n  margin-right: 20px;\\n}\\n:host .requests .requests-users .user {\\n  width: 40px;\\n  height: 40px;\\n  margin-right: -10px;\\n}\\n:host .requests .requests-users .user img {\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n  border-radius: 50%;\\n  border: 2px solid white;\\n}\\n:host .requests .requests-users .user.with-count {\\n  background: var(--ion-color-light-shade);\\n  position: relative;\\n  border-radius: 50%;\\n  border: 2px solid white;\\n}\\n:host .requests .requests-users .user.with-count span {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  color: white;\\n  font-size: 18px;\\n}\\n:host .requests .action {\\n  display: flex;\\n  width: 100%;\\n  justify-content: space-between;\\n  font-size: 15px;\\n  min-height: 40px;\\n  align-items: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjdGl2aXR5LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDRTtFQUNFLGtCQUFBO0VBQ0EsZUFBQTtFQUNBLHlCQUFBO0VBQ0EsU0FBQTtBQUFKO0FBRUU7RUFDRSxZQUFBO0FBQUo7QUFDSTtFQUNFLDBCQUFBO0FBQ047QUFDSTtFQUNFLGtCQUFBO0VBQ0Esd0JBQUE7RUFDQSxhQUFBO0FBQ047QUFFRTtFQUNFLGFBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0EscUNBQUE7RUFDQSxnQkFBQTtFQUNBLGtCQUFBO0FBQUo7QUFDSTtFQUNFLGFBQUE7RUFDQSxrQkFBQTtBQUNOO0FBQU07RUFDRSxXQUFBO0VBQ0EsWUFBQTtFQUNBLG1CQUFBO0FBRVI7QUFEUTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLHVCQUFBO0FBR1Y7QUFEUTtFQUNFLHdDQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQkFBQTtFQUNBLHVCQUFBO0FBR1Y7QUFGVTtFQUNFLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxnQ0FBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0FBSVo7QUFDSTtFQUNFLGFBQUE7RUFDQSxXQUFBO0VBQ0EsOEJBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtBQUNOIiwiZmlsZSI6ImFjdGl2aXR5LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgcCB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjUpO1xuICAgIG1hcmdpbjogMDtcbiAgfVxuICBpb24tbGlzdCB7XG4gICAgbWFyZ2luOiAxMHB4O1xuICAgIHAge1xuICAgICAgZm9udC1zaXplOiAxMnB4ICFpbXBvcnRhbnQ7XG4gICAgfVxuICAgIGlvbi1pdGVtIHtcbiAgICAgIC0tcGFkZGluZy1lbmQ6IDBweDtcbiAgICAgIC0taW5uZXItcGFkZGluZy1lbmQ6IDBweDtcbiAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgfVxuICB9XG4gIC5yZXF1ZXN0cyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBwYWRkaW5nOiAxMHB4IDE1cHg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMDYpO1xuICAgIG1hcmdpbjogMTBweCA1cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgIC5yZXF1ZXN0cy11c2VycyB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xuICAgICAgLnVzZXIge1xuICAgICAgICB3aWR0aDogNDBweDtcbiAgICAgICAgaGVpZ2h0OiA0MHB4O1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IC0xMHB4O1xuICAgICAgICBpbWcge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgYm9yZGVyOiAycHggc29saWQgd2hpdGU7XG4gICAgICAgIH1cbiAgICAgICAgJi53aXRoLWNvdW50IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItbGlnaHQtc2hhZGUpO1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgYm9yZGVyOiAycHggc29saWQgd2hpdGU7XG4gICAgICAgICAgc3BhbiB7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAuYWN0aW9uIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICAgIG1pbi1oZWlnaHQ6IDQwcHg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIH1cbiAgfVxufVxuIl19 */\";","export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{\\\"activity\\\" | translate }}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content fullscreen>\\n  <ion-refresher\\n    slot=\\\"fixed\\\"\\n    pullFactor=\\\"0.5\\\"\\n    pullMin=\\\"100\\\"\\n    pullMax=\\\"200\\\"\\n    (ionRefresh)=\\\"doRefresh()\\\"\\n  >\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n  <div class=\\\"requests\\\" *ngIf=\\\"user_requests.length>0\\\">\\n    <div class=\\\"requests-users\\\">\\n      <div class=\\\"user\\\" *ngFor=\\\"let user of user_requests |slice:0:3\\\">\\n        <img [src]=\\\"user.thumbnail || default_user_image\\\" alt=\\\"\\\" />\\n      </div>\\n      <div class=\\\"user with-count\\\" *ngIf=\\\"user_requests.length>3\\\">\\n        <span>+{{user_requests.length-3}}</span>\\n      </div>\\n    </div>\\n    <div class=\\\"action\\\" [routerLink]=\\\"['waiting-requests']\\\">\\n      {{\\\"follow_requests\\\"|translate}}\\n      <ion-icon\\n        name=\\\"chevron-forward-outline\\\"\\n      ></ion-icon>\\n    </div>\\n  </div>\\n  <ion-list *ngIf=\\\"activities.length > 0\\\">\\n    <p *ngIf=\\\"showNew\\\">{{\\\"new\\\" | translate }}</p>\\n    <ion-item\\n      class=\\\"ion-no-padding\\\"\\n      lines=\\\"none\\\"\\n      *ngFor=\\\"let activity of activities\\\"\\n    >\\n      <activity-card [activity]=\\\"activity\\\"></activity-card>\\n    </ion-item>\\n  </ion-list>\\n  <p *ngIf=\\\"activities.length == 0\\\">{{\\\"no-activity\\\" | translate }}</p>\\n  <ion-spinner\\n    *ngIf=\\\"loading\\\"\\n    class=\\\"spinner-center-page\\\"\\n    name=\\\"crescent\\\"\\n  ></ion-spinner>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}