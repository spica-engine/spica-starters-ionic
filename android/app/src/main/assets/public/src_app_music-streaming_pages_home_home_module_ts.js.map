{"version":3,"sources":["./src/app/music-streaming/pages/home/home-routing.module.ts","./src/app/music-streaming/pages/home/home.module.ts","./src/app/music-streaming/pages/home/home.page.ts","./src/app/music-streaming/pages/home/home.page.scss","./src/app/music-streaming/pages/home/home.page.html"],"names":[],"mappings":"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","file":"src_app_music-streaming_pages_home_home_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage\n  },\n  {\n    path: 'list',\n    loadChildren: () => import('../list/list.module').then( m => m.ListPageModule)\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\nimport { HomePage } from './home.page';\nimport { MusicStreamingComponentModule } from '../../components/music-components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule,\n    MusicStreamingComponentModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ModalController } from '@ionic/angular';\nimport { FollowableModalComponent } from '../../components/followable-modal/followable-modal.component';\nimport { AuthService } from '../../services/auth.service';\nimport * as DataService from '../../services/bucket';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.page.html',\n  styleUrls: ['./home.page.scss'],\n})\nexport class HomePage {\n  slideOpts = {\n    slidesPerView: 2.4,\n    coverflowEffect: {\n      rotate: 50,\n      stretch: 0,\n      depth: 100,\n      modifier: 1,\n      slideShadows: true,\n    },\n  };\n\n  userId: string;\n  user: DataService.User;\n  recommended: DataService.Artist[] = [];\n  followedArtistsIds: string[] = [];\n  isLoading: boolean = true;\n\n  constructor(\n    private _authService: AuthService,\n    private _router: Router,\n    private _modalController: ModalController\n  ) {\n    this._authService.initBucket();\n  }\n\n  async ionViewWillEnter() {\n    this.userId = (await this._authService.getUser().toPromise())?._id;\n    console.log('userid :', this.userId);\n    if (this.userId) {\n      await this.getUser();\n      if (!this.user.followed_artists.length) {\n        this.followableModal();\n      }\n      this.recommended = await this.getRecommended();\n    }\n    this.isLoading = false;\n  }\n\n  async getUser() {\n    this.user = await DataService.user.get(this.userId, {\n      queryParams: { relation: true },\n    });\n\n    this.user.followed_artists?.forEach((el) => {\n      this.followedArtistsIds.push(el['_id']);\n    });\n  }\n\n  navigateToList(id) {\n    this._router.navigate([`/music-streaming/tabs/home/list/${id}`], {\n      queryParams: { type: 'artist' },\n    });\n  }\n\n  getRecommended() {\n    return DataService.artist.getAll({\n      queryParams: { filter: { _id: { $nin: this.followedArtistsIds } } },\n    });\n  }\n\n  async followableModal() {\n    const modal = await this._modalController.create({\n      component: FollowableModalComponent,\n      componentProps: {\n        type: 'artist',\n      },\n    });\n\n    modal.onWillDismiss().then((res) => {\n      if (!res.data) {\n        return;\n      }\n      this.getUser();\n    });\n\n    return await modal.present();\n  }\n}\n","export default \":host .logo {\\n  align-items: center;\\n  display: flex;\\n  color: var(--cd-logo-color);\\n  font-weight: bold;\\n}\\n:host .logo ion-icon {\\n  padding-right: 10px;\\n}\\n:host ion-toolbar {\\n  --border-color: var(--cd-divider-color);\\n}\\n:host ion-toolbar ion-icon {\\n  width: 30px;\\n  height: 30px;\\n}\\n:host ion-content .part-container {\\n  padding: 25px 0;\\n}\\n:host ion-content .part-container.last {\\n  margin-bottom: 70px;\\n}\\n:host ion-content .part-container .part-title {\\n  margin-left: 15px;\\n  font-size: 20px;\\n  font-weight: 700;\\n}\\n:host ion-content .part-container ion-slides {\\n  margin-top: 15px;\\n}\\n:host ion-content .part-container ion-slides ion-slide {\\n  display: flex;\\n  flex-direction: column;\\n}\\n:host ion-content .part-container ion-slides ion-slide.first {\\n  margin-left: 15px;\\n}\\n:host ion-content .part-container ion-slides ion-slide ::ng-deep .part-item {\\n  width: calc(100vw * 0.38) !important;\\n  height: calc(100vw * 0.38) !important;\\n  max-width: 136px;\\n  max-height: 136px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNFO0VBQ0UsbUJBQUE7RUFDQSxhQUFBO0VBQ0EsMkJBQUE7RUFDQSxpQkFBQTtBQUFKO0FBQ0k7RUFDRSxtQkFBQTtBQUNOO0FBR0U7RUFDRSx1Q0FBQTtBQURKO0FBRUk7RUFDRSxXQUFBO0VBQ0EsWUFBQTtBQUFOO0FBS0k7RUFDRSxlQUFBO0FBSE47QUFLTTtFQUNFLG1CQUFBO0FBSFI7QUFNTTtFQUNFLGlCQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0FBSlI7QUFPTTtFQUNFLGdCQUFBO0FBTFI7QUFPUTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtBQUxWO0FBT1U7RUFDRSxpQkFBQTtBQUxaO0FBU1k7RUFDRSxvQ0FBQTtFQUNBLHFDQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtBQVBkIiwiZmlsZSI6ImhvbWUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xuICAubG9nbyB7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGNvbG9yOiB2YXIoLS1jZC1sb2dvLWNvbG9yKTtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBpb24taWNvbiB7XG4gICAgICBwYWRkaW5nLXJpZ2h0OiAxMHB4O1xuICAgIH1cbiAgfVxuXG4gIGlvbi10b29sYmFyIHtcbiAgICAtLWJvcmRlci1jb2xvcjogdmFyKC0tY2QtZGl2aWRlci1jb2xvcik7XG4gICAgaW9uLWljb24ge1xuICAgICAgd2lkdGg6IDMwcHg7XG4gICAgICBoZWlnaHQ6IDMwcHg7XG4gICAgfVxuICB9XG5cbiAgaW9uLWNvbnRlbnQge1xuICAgIC5wYXJ0LWNvbnRhaW5lciB7XG4gICAgICBwYWRkaW5nOiAyNXB4IDA7XG5cbiAgICAgICYubGFzdCB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDcwcHg7XG4gICAgICB9XG5cbiAgICAgIC5wYXJ0LXRpdGxlIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDE1cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgICAgIH1cblxuICAgICAgaW9uLXNsaWRlcyB7XG4gICAgICAgIG1hcmdpbi10b3A6IDE1cHg7XG5cbiAgICAgICAgaW9uLXNsaWRlIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgICAgICAgICAmLmZpcnN0IHtcbiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxNXB4O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIDo6bmctZGVlcCB7XG4gICAgICAgICAgICAucGFydC1pdGVtIHtcbiAgICAgICAgICAgICAgd2lkdGg6IGNhbGMoMTAwdncgKiAwLjM4KSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwdncgKiAwLjM4KSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEzNnB4O1xuICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMzZweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ== */\";","export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <div class=\\\"logo\\\">\\n        <ion-icon name=\\\"logo-ionic\\\"></ion-icon>\\n        Music Streaming\\n      </div>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-spinner class=\\\"spinner-center-page\\\" *ngIf=\\\"isLoading\\\"></ion-spinner>\\n  <ng-container *ngIf=\\\"user && !isLoading\\\">\\n    <div class=\\\"part-container\\\">\\n      <ion-text class=\\\"part-title\\\">To Get You Started</ion-text>\\n\\n      <ion-slides [options]=\\\"slideOpts\\\">\\n        <ion-slide\\n          *ngFor=\\\"let folowing of user.followed_artists; let index = index\\\"\\n          (click)=\\\"navigateToList(folowing['_id'])\\\"\\n          [class.first]=\\\"index==0\\\"\\n        >\\n          <music-part-item\\n            [data]=\\\"{img: folowing['profile_picture'], text: folowing['name']}\\\"\\n          ></music-part-item>\\n        </ion-slide>\\n      </ion-slides>\\n    </div>\\n\\n    <div class=\\\"part-container\\\">\\n      <ion-text class=\\\"part-title\\\">Try Something Different</ion-text>\\n\\n      <ion-slides [options]=\\\"slideOpts\\\">\\n        <ion-slide\\n          *ngFor=\\\"let item of recommended let index = index\\\"\\n          (click)=\\\"navigateToList(item['_id'])\\\"\\n          [class.first]=\\\"index==0\\\"\\n        >\\n          <music-part-item\\n            [data]=\\\"{img: item['profile_picture'], text: item['name']}\\\"\\n          ></music-part-item>\\n        </ion-slide>\\n      </ion-slides>\\n    </div>\\n\\n    <div class=\\\"part-container last recommended\\\">\\n      <ion-text class=\\\"part-title\\\">Recommended Artists</ion-text>\\n\\n      <ion-slides [options]=\\\"slideOpts\\\">\\n        <ion-slide\\n          *ngFor=\\\"let item of recommended let index = index\\\"\\n          (click)=\\\"navigateToList(item['_id'])\\\"\\n          [class.first]=\\\"index==0\\\"\\n        >\\n          <music-part-item\\n            [data]=\\\"{img: item['profile_picture'], text: item['name']}\\\"\\n            [isCircle]=\\\"true\\\"\\n          ></music-part-item>\\n        </ion-slide>\\n      </ion-slides>\\n    </div>\\n  </ng-container>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}