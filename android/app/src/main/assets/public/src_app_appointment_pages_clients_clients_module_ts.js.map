{"version":3,"sources":["./src/app/appointment/pages/clients/clients-routing.module.ts","./src/app/appointment/pages/clients/clients.module.ts","./src/app/appointment/pages/clients/clients.page.ts","./src/app/appointment/pages/clients/clients.page.scss","./src/app/appointment/pages/clients/clients.page.html"],"names":[],"mappings":"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","file":"src_app_appointment_pages_clients_clients_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ClientsPage } from './clients.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ClientsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ClientsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ClientsPageRoutingModule } from './clients-routing.module';\n\nimport { ClientsPage } from './clients.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ClientsPageRoutingModule\n  ],\n  declarations: [ClientsPage]\n})\nexport class ClientsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { ClientModalComponent } from '../../components/client-modal/client-modal.component';\nimport * as DataService from '../../services/bucket';\n\n@Component({\n  selector: 'app-clients',\n  templateUrl: './clients.page.html',\n  styleUrls: ['./clients.page.scss'],\n})\nexport class ClientsPage implements OnInit {\n  clients: DataService.Client[] = [];\n  searchTerm: string;\n\n  constructor(private _modalController: ModalController) {}\n\n  ngOnInit() {\n    this.getClients();\n  }\n\n  async getClients() {\n    this.clients = await DataService.client.getAll({queryParams: {sort: {_id: -1}}});\n  }\n\n  async clientModal(client = undefined) {\n    const modal = await this._modalController.create({\n      component: ClientModalComponent,\n      componentProps: {\n        action: client ? 'update' : 'create',\n        client: client,\n      },\n    });\n\n    modal.onWillDismiss().then(async (res) => {\n      if (!res.data || res.data.value == 'close') {\n        return;\n      } else if (res.data.action == 'create') {\n        const newClient = await this.createClient(res.data.client);\n        this.clients.unshift(newClient)\n      } else if (res.data.action == 'update') {\n        await this.updateClient(res.data.client);\n      } else if (res.data.action == 'delete') {\n        this.deleteClient(res.data.client._id);\n        this.clients = this.clients.filter(el => {\n          return el._id !== client._id\n        })\n      }\n    });\n\n    return await modal.present();\n  }\n\n  async createClient(client) {\n    return await DataService.client.insert(client);\n  }\n  async updateClient(client) {\n    await DataService.client.patch(client);\n  }\n  async deleteClient(id) {\n    await DataService.client.remove(id);\n  }\n\n  async search(terms) {\n    this.clients = await DataService.client.getAll({\n      queryParams: {\n        filter: {\n          $or: [\n            { name: { $regex: terms, $options: 'i' } },\n            { surname: { $regex: terms, $options: 'i' } },\n          ],\n        },\n        limit: 10,\n      },\n    });\n  }\n}\n","export default \":host ion-card {\\n  padding: 15px;\\n}\\n:host .new-client {\\n  width: 100%;\\n  display: flex;\\n  justify-content: center;\\n}\\n:host .new-client div {\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  margin: 20px 0;\\n  display: flex;\\n  justify-content: center;\\n}\\n:host .new-client div ion-text {\\n  margin-left: 6px;\\n}\\n:host ion-card {\\n  margin: 15px 12px;\\n}\\n:host ion-card h2 {\\n  color: black;\\n  margin-bottom: 10px;\\n}\\n:host ion-card p {\\n  margin-top: 5px;\\n  margin-left: 10px;\\n  display: flex;\\n  align-items: center;\\n}\\n:host ion-card p ion-icon {\\n  margin-right: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsaWVudHMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNFO0VBQ0UsYUFBQTtBQUFKO0FBRUU7RUFDRSxXQUFBO0VBQ0EsYUFBQTtFQUNBLHVCQUFBO0FBQUo7QUFDSTtFQUNFLHVCQUFBO0VBQUEsa0JBQUE7RUFDQSxjQUFBO0VBQ0EsYUFBQTtFQUNBLHVCQUFBO0FBQ047QUFBTTtFQUNFLGdCQUFBO0FBRVI7QUFHRTtFQUNFLGlCQUFBO0FBREo7QUFFSTtFQUNFLFlBQUE7RUFDQSxtQkFBQTtBQUFOO0FBRUk7RUFDRSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7QUFBTjtBQUNNO0VBQ0Usa0JBQUE7QUFDUiIsImZpbGUiOiJjbGllbnRzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgaW9uLWNhcmQge1xuICAgIHBhZGRpbmc6IDE1cHg7XG4gIH1cbiAgLm5ldy1jbGllbnQge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgZGl2IHtcbiAgICAgIHdpZHRoOiBmaXQtY29udGVudDtcbiAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgaW9uLXRleHQge1xuICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlvbi1jYXJke1xuICAgIG1hcmdpbjogMTVweCAxMnB4O1xuICAgIGgye1xuICAgICAgY29sb3I6IGJsYWNrO1xuICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICB9XG4gICAgcHtcbiAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBpb24taWNvbntcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19 */\";","export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar>\\n    <ion-title>Clients</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"new-client\\\">\\n    <div (click)=\\\"clientModal()\\\">\\n      <ion-icon name=\\\"person-add-outline\\\"></ion-icon>\\n      <ion-text>Add new client</ion-text>\\n    </div>\\n  </div>\\n  <ion-searchbar\\n    mode=\\\"ios\\\"\\n    [debounce]=\\\"800\\\"\\n    (ionChange)=\\\"search($event.target['value'])\\\"\\n    [(ngModel)]=\\\"searchTerm\\\"\\n  ></ion-searchbar>\\n  <ion-card *ngFor=\\\"let client of clients\\\" (click)=\\\"clientModal(client)\\\">\\n    <ion-label>\\n      <h2>{{client.name + ' ' + client.surname}}</h2>\\n      <p>\\n        <ion-icon name=\\\"calendar-number-outline\\\"></ion-icon>\\n        {{client.date_of_birth | date: 'dd-MM-yyyy'}}\\n      </p>\\n      <p><ion-icon name=\\\"call\\\"></ion-icon> {{client.phone}}</p>\\n    </ion-label>\\n  </ion-card>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}